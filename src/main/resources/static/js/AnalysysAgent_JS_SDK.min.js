!function (e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof {} && {}.amd ? {}(t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).AnalysysAgent = t()
}(this, function () {
    "use strict";
    "object" != typeof JSON && (JSON = {}), function () {
        var rx_one = /^[\],:{}\s]*$/, rx_two = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
            rx_three = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
            rx_four = /(?:^|:|,)(?:\s*\[)+/g,
            rx_escapable = /[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            rx_dangerous = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            gap, indent, meta, rep;

        function f(e) {
            return e < 10 ? "0" + e : e
        }

        function this_value() {
            return this.valueOf()
        }

        function quote(e) {
            return rx_escapable.lastIndex = 0, rx_escapable.test(e) ? '"' + e.replace(rx_escapable, function (e) {
                var t = meta[e];
                return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
            }) + '"' : '"' + e + '"'
        }

        function str(e, t) {
            var i, n, r, o, a, s = gap, l = t[e];
            switch (l && "object" == typeof l && "function" == typeof l.toJSON && (l = l.toJSON(e)), "function" == typeof rep && (l = rep.call(t, e, l)), typeof l) {
                case"string":
                    return quote(l);
                case"number":
                    return isFinite(l) ? String(l) : "null";
                case"boolean":
                case"null":
                    return String(l);
                case"object":
                    if (!l) return "null";
                    if (gap += indent, a = [], "[object Array]" === Object.prototype.toString.apply(l)) {
                        for (o = l.length, i = 0; i < o; i += 1) a[i] = str(i, l) || "null";
                        return r = 0 === a.length ? "[]" : gap ? "[\n" + gap + a.join(",\n" + gap) + "\n" + s + "]" : "[" + a.join(",") + "]", gap = s, r
                    }
                    if (rep && "object" == typeof rep) for (o = rep.length, i = 0; i < o; i += 1) "string" == typeof rep[i] && (r = str(n = rep[i], l)) && a.push(quote(n) + (gap ? ": " : ":") + r); else for (n in l) Object.prototype.hasOwnProperty.call(l, n) && (r = str(n, l)) && a.push(quote(n) + (gap ? ": " : ":") + r);
                    return r = 0 === a.length ? "{}" : gap ? "{\n" + gap + a.join(",\n" + gap) + "\n" + s + "}" : "{" + a.join(",") + "}", gap = s, r
            }
        }

        "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function () {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
        }, Boolean.prototype.toJSON = this_value, Number.prototype.toJSON = this_value, String.prototype.toJSON = this_value), "function" != typeof JSON.stringify && (meta = {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        }, JSON.stringify = function (e, t, i) {
            var n;
            if (indent = gap = "", "number" == typeof i) for (n = 0; n < i; n += 1) indent += " "; else "string" == typeof i && (indent = i);
            if ((rep = t) && "function" != typeof t && ("object" != typeof t || "number" != typeof t.length)) throw new Error("JSON.stringify");
            return str("", {"": e})
        }), "function" != typeof JSON.parse && (JSON.parse = function (text, reviver) {
            var j;

            function walk(e, t) {
                var i, n, r = e[t];
                if (r && "object" == typeof r) for (i in r) Object.prototype.hasOwnProperty.call(r, i) && ((n = walk(r, i)) !== undefined ? r[i] = n : delete r[i]);
                return reviver.call(e, t, r)
            }

            if (text = String(text), rx_dangerous.lastIndex = 0, rx_dangerous.test(text) && (text = text.replace(rx_dangerous, function (e) {
                return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
            })), rx_one.test(text.replace(rx_two, "@").replace(rx_three, "]").replace(rx_four, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({"": j}, "") : j;
            throw new SyntaxError("JSON.parse")
        })
    }();
    var fieldTemplate = {
        base: {
            outer: ["appid", "xwho", "xwhat", "xwhen", "xcontext"],
            xcontext: ["$lib", "$lib_version", "$platform", "$debug", "$is_login"]
        },
        $startup: {xcontext: ["$screen_width", "$screen_height", "$web_crawler", "$time_zone", "$language", "$session_id", "$is_first_time", "$is_first_day", "$utm_campaign_id", "$utm_source", "$utm_medium", "$utm_term", "$utm_content", "$utm_campaign", "$is_time_calibrated"]},
        $track: {xcontext: ["$screen_width", "$screen_height", "$web_crawler", "$time_zone", "$language", "$is_first_day", "$session_id", "$utm_campaign_id", "$utm_source", "$utm_medium", "$utm_term", "$utm_content", "$utm_campaign", "$is_time_calibrated"]},
        $pageview: {xcontext: ["$screen_width", "$screen_height", "$web_crawler", "$time_zone", "$language", "$session_id", "$is_first_day", "$referrer", "$referrer_domain", "$title", "$url", "$startup_time", "$utm_campaign_id", "$utm_source", "$utm_medium", "$utm_term", "$utm_content", "$utm_campaign", "$is_time_calibrated"]},
        $alias: {xcontext: ["$original_id"]},
        $getPresetProperties: {xcontext: ["$screen_width", "$screen_height", "$time_zone", "$session_id", "$language"]}
    }, baseConfig = {
        base: {
            appid: "",
            $debug: 0,
            uploadURL: "",
            auto: !0,
            autoProfile: !0,
            hash: !0,
            autoWebstay: !0,
            singlePage: !0,
            pageProperty: {},
            $lib_version: "4.5.5",
            cross_subdomain: !0,
            cross_subdomain_super: !0,
            allowTimeCheck: !1,
            isHybrid: !1,
            getDataTimeout: 1e4,
            sendDataTimeout: 1e4,
            isMessageSDK: !1
        },
        status: {code: 200, FnName: "", key: "", value: "", errorCode: "", successCode: ""},
        keywords: fieldTemplate.base.xcontext,
        baseJson: fieldTemplate.base.outer,
        sendNum: 1800
    }, _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    function _utf8Encode(e) {
        e = e.replace(/\r\n/g, "\n");
        for (var t = "", i = 0; i < e.length; i++) {
            var n = e.charCodeAt(i);
            n < 128 ? t += String.fromCharCode(n) : (127 < n && n < 2048 ? t += String.fromCharCode(n >> 6 | 192) : (t += String.fromCharCode(n >> 12 | 224), t += String.fromCharCode(n >> 6 & 63 | 128)), t += String.fromCharCode(63 & n | 128))
        }
        return t
    }

    function _utf8Decode(e) {
        for (var t = "", i = 0, n = 0, r = 0, o = 0; i < e.length;) (n = e.charCodeAt(i)) < 128 ? (t += String.fromCharCode(n), i++) : 191 < n && n < 224 ? (r = e.charCodeAt(i + 1), t += String.fromCharCode((31 & n) << 6 | 63 & r), i += 2) : (r = e.charCodeAt(i + 1), o = e.charCodeAt(i + 2), t += String.fromCharCode((15 & n) << 12 | (63 & r) << 6 | 63 & o), i += 3);
        return t
    }

    function Util() {
    }

    function CheckChinese(e) {
        return !!new RegExp("[\\u4E00-\\u9FFF]+", "g").test(e)
    }

    Util.prototype.paramType = function (e) {
        return Object.prototype.toString.call(e).replace("[object ", "").replace("]", "")
    }, Util.prototype.objHasKay = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, Util.prototype.ArrayToObj = function (e) {
        for (var t = {}, i = 0; i < e.length; i++) t[e[i]] = "";
        return t
    }, Util.prototype.keyValueToObje = function (e, t) {
        var i = {};
        return i[e] = t, i
    }, Util.prototype.toDeep = function (e) {
        var t = null;
        if ("Array" === this.paramType(e)) {
            t = [];
            for (var i = 0; i < e.length; i++) t.push(this.toDeep(e[i]))
        } else if ("Object" === this.paramType(e)) for (var n in t = {}, e) t[n] = this.toDeep(e[n]); else t = e;
        return t
    }, Util.prototype.toDeepObj = function (e, t) {
        var i = {};
        if ("String" === this.paramType(e)) return i = this.keyValueToObje(e, t);
        if ("Array" === this.paramType(e)) return i = this.ArrayToObj(e);
        if ("Object" === this.paramType(e)) for (var n in e) i[n] = this.toDeepObj(e[n]);
        return i
    }, Util.prototype.toDeep = function (e) {
        var t = null;
        if ("Array" === this.paramType(e)) {
            t = [];
            for (var i = 0; i < e.length; i++) t.push(this.toDeep(e[i]))
        } else if ("Object" === this.paramType(e)) for (var n in t = {}, e) t[n] = this.toDeep(e[n]); else t = e;
        return t
    }, Util.prototype.toObj = function (e, t) {
        var i = {};
        return "String" === this.paramType(e) ? i = this.keyValueToObje(e, t) : "Array" === this.paramType(e) ? i = this.ArrayToObj(e) : "Object" === this.paramType(e) ? e : i
    }, Util.prototype.objMerge = function (e, t) {
        if ("Object" !== this.paramType(e) || "Object" !== this.paramType(t)) return e;
        var i = {};
        for (var n in e) i[n] = e[n];
        for (var r in t) {
            var o = t[r], a = i[r], s = this.paramType(o), l = this.paramType(a);
            i[r] = a && "Object" === l && "Object" === s ? this.objMerge(a, o) : "Array" === l && "Array" === s ? this.arrayMergeUnique(a, o) : "Function" === s && "Function" === l ? this.compose(a, o) : o
        }
        return i
    }, Util.prototype.compose = function () {
        var i = arguments, n = i.length - 1;
        return function () {
            for (var e = n, t = i[n].apply(this, arguments); e--;) t = i[e].call(this, t);
            return t
        }
    }, Util.prototype.fnMerge = function (e, t) {
        return this.objMerge(e, t)
    }, Util.prototype.arrayUnique = function (e) {
        for (var t = [], i = {}, n = 0; n < e.length; n++) i[e[n]] || (i[e[n]] = !0, t.push(e[n]));
        return t
    }, Util.prototype.arrayMerge = function (e, t) {
        for (var i = [], n = 0; n < e.length; n++) {
            var r = e[n];
            "Object" === this.paramType(e[n]) && (r = this.toDeep(e[n])), i.push(r)
        }
        for (var o = 0; o < t.length; o++) {
            var a = t[o];
            "Object" === this.paramType(t[o]) && (a = this.toDeep(t[o])), i.push(a)
        }
        return i
    }, Util.prototype.arrayMergeUnique = function (e, t) {
        return e.push.apply(e, t), this.arrayUnique(e)
    }, Util.prototype.encode = function (e) {
        var t, i, n, r, o, a, s, l = "", c = 0;
        for (e = _utf8Encode(e); c < e.length;) r = (t = e.charCodeAt(c++)) >> 2, o = (3 & t) << 4 | (i = e.charCodeAt(c++)) >> 4, a = (15 & i) << 2 | (n = e.charCodeAt(c++)) >> 6, s = 63 & n, isNaN(i) ? a = s = 64 : isNaN(n) && (s = 64), l = l + _keyStr.charAt(r) + _keyStr.charAt(o) + _keyStr.charAt(a) + _keyStr.charAt(s);
        return l
    }, Util.prototype.decode = function (e) {
        var t, i, n, r, o, a, s = "", l = 0;
        for (e = e.replace(/[^A-Za-z0-9+/=]/g, ""); l < e.length;) t = _keyStr.indexOf(e.charAt(l++)) << 2 | (r = _keyStr.indexOf(e.charAt(l++))) >> 4, i = (15 & r) << 4 | (o = _keyStr.indexOf(e.charAt(l++))) >> 2, n = (3 & o) << 6 | (a = _keyStr.indexOf(e.charAt(l++))), s += String.fromCharCode(t), 64 !== o && (s += String.fromCharCode(i)), 64 !== a && (s += String.fromCharCode(n));
        return s = _utf8Decode(s)
    }, Util.prototype.isEmptyObject = function (e) {
        for (var t in e) return !1;
        return !0
    }, Util.prototype.format = function (e, t) {
        var i = e.getTimezoneOffset(), n = {
            "M+": (e = new Date(e.getTime() + 60 * i * 1e3 + 288e5)).getMonth() + 1,
            "d+": e.getDate(),
            "h+": e.getHours(),
            "m+": e.getMinutes(),
            "s+": e.getSeconds(),
            "q+": Math.floor((e.getMonth() + 3) / 3),
            "S+": e.getMilliseconds()
        };
        for (var r in /(y+)/.test(t) && (t = t.replace(RegExp.$1, (e.getFullYear() + "").substr(4 - RegExp.$1.length))), n) new RegExp("(" + r + ")").test(t) && (t = t.replace(RegExp.$1, 3 === RegExp.$1.length ? ("" + n[r]).length < 3 ? ("00" + n[r]).substr(("00" + n[r]).length - 3, ("00" + n[r]).length) : n[r] : ("00" + n[r]).substr(("" + n[r]).length)));
        return t.toString()
    }, Util.prototype.MD5 = function (e, t) {
        function l(e, t) {
            return e << t | e >>> 32 - t
        }

        function c(e, t) {
            var i = 2147483648 & e, n = 2147483648 & t, r = 1073741824 & e, o = 1073741824 & t,
                a = (1073741823 & e) + (1073741823 & t);
            return r & o ? 2147483648 ^ a ^ i ^ n : r | o ? 1073741824 & a ? 3221225472 ^ a ^ i ^ n : 1073741824 ^ a ^ i ^ n : a ^ i ^ n
        }

        function i(e, t, i, n, r, o, a) {
            var s;
            return e = c(e, c(c((s = t) & i | ~s & n, r), a)), c(l(e, o), t)
        }

        function n(e, t, i, n, r, o, a) {
            var s;
            return e = c(e, c(c(t & (s = n) | i & ~s, r), a)), c(l(e, o), t)
        }

        function r(e, t, i, n, r, o, a) {
            return e = c(e, c(c(t ^ i ^ n, r), a)), c(l(e, o), t)
        }

        function o(e, t, i, n, r, o, a) {
            return e = c(e, c(c(i ^ (t | ~n), r), a)), c(l(e, o), t)
        }

        function a(e) {
            for (var t = "", i = "", n = 0; n <= 3; n++) t += (i = "0" + (e >>> 8 * n & 255).toString(16)).substr(i.length - 2, 2);
            return t
        }

        for (var s, u, p, d, g = function (e) {
            for (var t, i = e.length, n = i + 8, r = 16 * (1 + (n - n % 64) / 64), o = Array(r - 1), a = 0, s = 0; s < i;) a = s % 4 * 8, o[t = (s - s % 4) / 4] = o[t] | e.charCodeAt(s) << a, s++;
            return a = s % 4 * 8, o[t = (s - s % 4) / 4] = o[t] | 128 << a, o[r - 2] = i << 3, o[r - 1] = i >>> 29, o
        }(e), f = 1732584193, m = 4023233417, y = 2562383102, h = 271733878, b = 0; b < g.length; b += 16) f = i(s = f, u = m, p = y, d = h, g[b + 0], 7, 3614090360), h = i(h, f, m, y, g[b + 1], 12, 3905402710), y = i(y, h, f, m, g[b + 2], 17, 606105819), m = i(m, y, h, f, g[b + 3], 22, 3250441966), f = i(f, m, y, h, g[b + 4], 7, 4118548399), h = i(h, f, m, y, g[b + 5], 12, 1200080426), y = i(y, h, f, m, g[b + 6], 17, 2821735955), m = i(m, y, h, f, g[b + 7], 22, 4249261313), f = i(f, m, y, h, g[b + 8], 7, 1770035416), h = i(h, f, m, y, g[b + 9], 12, 2336552879), y = i(y, h, f, m, g[b + 10], 17, 4294925233), m = i(m, y, h, f, g[b + 11], 22, 2304563134), f = i(f, m, y, h, g[b + 12], 7, 1804603682), h = i(h, f, m, y, g[b + 13], 12, 4254626195), y = i(y, h, f, m, g[b + 14], 17, 2792965006), f = n(f, m = i(m, y, h, f, g[b + 15], 22, 1236535329), y, h, g[b + 1], 5, 4129170786), h = n(h, f, m, y, g[b + 6], 9, 3225465664), y = n(y, h, f, m, g[b + 11], 14, 643717713), m = n(m, y, h, f, g[b + 0], 20, 3921069994), f = n(f, m, y, h, g[b + 5], 5, 3593408605), h = n(h, f, m, y, g[b + 10], 9, 38016083), y = n(y, h, f, m, g[b + 15], 14, 3634488961), m = n(m, y, h, f, g[b + 4], 20, 3889429448), f = n(f, m, y, h, g[b + 9], 5, 568446438), h = n(h, f, m, y, g[b + 14], 9, 3275163606), y = n(y, h, f, m, g[b + 3], 14, 4107603335), m = n(m, y, h, f, g[b + 8], 20, 1163531501), f = n(f, m, y, h, g[b + 13], 5, 2850285829), h = n(h, f, m, y, g[b + 2], 9, 4243563512), y = n(y, h, f, m, g[b + 7], 14, 1735328473), f = r(f, m = n(m, y, h, f, g[b + 12], 20, 2368359562), y, h, g[b + 5], 4, 4294588738), h = r(h, f, m, y, g[b + 8], 11, 2272392833), y = r(y, h, f, m, g[b + 11], 16, 1839030562), m = r(m, y, h, f, g[b + 14], 23, 4259657740), f = r(f, m, y, h, g[b + 1], 4, 2763975236), h = r(h, f, m, y, g[b + 4], 11, 1272893353), y = r(y, h, f, m, g[b + 7], 16, 4139469664), m = r(m, y, h, f, g[b + 10], 23, 3200236656), f = r(f, m, y, h, g[b + 13], 4, 681279174), h = r(h, f, m, y, g[b + 0], 11, 3936430074), y = r(y, h, f, m, g[b + 3], 16, 3572445317), m = r(m, y, h, f, g[b + 6], 23, 76029189), f = r(f, m, y, h, g[b + 9], 4, 3654602809), h = r(h, f, m, y, g[b + 12], 11, 3873151461), y = r(y, h, f, m, g[b + 15], 16, 530742520), f = o(f, m = r(m, y, h, f, g[b + 2], 23, 3299628645), y, h, g[b + 0], 6, 4096336452), h = o(h, f, m, y, g[b + 7], 10, 1126891415), y = o(y, h, f, m, g[b + 14], 15, 2878612391), m = o(m, y, h, f, g[b + 5], 21, 4237533241), f = o(f, m, y, h, g[b + 12], 6, 1700485571), h = o(h, f, m, y, g[b + 3], 10, 2399980690), y = o(y, h, f, m, g[b + 10], 15, 4293915773), m = o(m, y, h, f, g[b + 1], 21, 2240044497), f = o(f, m, y, h, g[b + 8], 6, 1873313359), h = o(h, f, m, y, g[b + 15], 10, 4264355552), y = o(y, h, f, m, g[b + 6], 15, 2734768916), m = o(m, y, h, f, g[b + 13], 21, 1309151649), f = o(f, m, y, h, g[b + 4], 6, 4149444226), h = o(h, f, m, y, g[b + 11], 10, 3174756917), y = o(y, h, f, m, g[b + 2], 15, 718787259), m = o(m, y, h, f, g[b + 9], 21, 3951481745), f = c(f, s), m = c(m, u), y = c(y, p), h = c(h, d);
        return 32 === t ? a(f) + a(m) + a(y) + a(h) : a(m) + a(y)
    }, Util.prototype.clientTimeZone = function () {
        var e = (new Date).getTimezoneOffset(), t = parseInt(e / 60), i = e % 60, n = "-";
        return (t <= 0 || i < 0) && (n = "+", t = -t, i < 0 && (i = -i)), 1 === (t += "").length && (t = "0" + t), 1 === (i += "").length && (i = "0" + i), n + t + ":" + i
    }, Util.prototype.delEmpty = function (e) {
        var t = {};
        for (var i in e) {
            var n = !0, r = this.paramType(e[i]);
            "Object" !== r ? (e[i] || "Number" === r && !isNaN(e[i]) || "Boolean" === r || (n = !1), !0 === n && (t[i] = e[i])) : t[i] = this.delEmpty(e[i])
        }
        for (var o in t) {
            var a = [];
            for (var s in t[o]) a.push(t[o][s]);
            0 === a.length && t[o].constructor === Object && delete t[o]
        }
        return t
    }, Util.prototype.addEvent = function (e, t, i, n) {
        if (document.addEventListener) if ("Array" !== this.paramType(e) && "HTMLCollection" !== this.paramType(e) || !e.length || e === window) e.addEventListener(t, i, n); else for (var r = 0; r < e.length; r++) this.addEvent(e[r], t, i, n); else if (e.length && e !== window) for (var o = 0; o < e.length; o++) this.addEvent(e[o], t, i); else e.attachEvent("on" + t, function () {
            return i.call(e, window.event)
        })
    }, Util.prototype.removeEvent = function (e, t, i, n) {
        if (document.removeEventListener) if (e.length) for (var r = 0; r < e.length; r++) this.removeEvent(e[r], t, i, n); else e.removeEventListener(t, i, n); else if (e.length) for (var o = 0; o < e.length; o++) this.removeEvent(e[o], t, i); else e.detachEvent("on" + t, function () {
            return i.call(e, window.event)
        })
    }, Util.prototype.addEleLable = function (e, t, i, n) {
        var r = document, o = r.createElement(e), a = n || r.body || r.getElementsByTagName("body")[0];
        return i && (o.id = i), t && (o.className = t), a.appendChild(o), o
    }, Util.prototype.addScript = function (e, t, i) {
        var n = document, r = n.createElement("script"), o = n.getElementsByTagName("script");
        r.type = "text/javascript", r.async = !0, r.id = e;
        var a = "";
        if (t) {
            if ("Array" === this.paramType(t)) return void (0, t[0])([t[1]], i);
            a = "/" === t.charAt(t.length - 1) ? t : t + "/"
        } else if (n.getElementById("ARK_SDK")) a = n.getElementById("ARK_SDK").src; else for (var s = 0; s < o.length; s++) if (o[s].src && -1 < o[s].src.indexOf("AnalysysAgent_JS_SDK")) {
            a = o[s].src;
            break
        }
        var l = a.substring(0, a.lastIndexOf("/") + 1);
        r.src = l + e + ".min.js?v=" + this.format(new Date, "yyyyMMddhhmm"), r.onload = setTimeout(i, 500), o[0].parentNode.insertBefore(r, o[0])
    }, Util.prototype.GetUrlParam = function (e) {
        var t = document.location.toString(), i = window.name;
        "String" === this.paramType(i) && -1 < i.indexOf(e) && (t = i);
        var n = t.split("?");
        if (1 < n.length) {
            for (var r, o = [], a = 1; a < n.length; a++) o.push.apply(o, n[a].split("&"));
            for (var s = 0; s < o.length; s++) if (null != (r = o[s].split("=")) && r[0] === e) {
                var l = r[1];
                if (-1 < r[1].indexOf("#") && (l = l.split("#")[0]), -1 < l.indexOf("%")) {
                    try {
                        var c = decodeURI(l);
                        if (CheckChinese(c)) return c
                    } catch (u) {
                    }
                    if ("Object" === this.paramType(window.AnalysysModule) && "Function" === this.paramType(window.AnalysysModule.decodeGBK)) try {
                        return window.AnalysysModule.decodeGBK(l, "gbk")
                    } catch (u) {
                    }
                }
                return l
            }
            return ""
        }
        return ""
    }, Util.prototype.stringSlice = function (e, t) {
        return e.slice(0, t)
    }, Util.prototype.trim = function (e) {
        return "String" === this.paramType(e) ? e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "") : e
    }, Util.prototype.changeHash = function (e) {
        var t = window.history.pushState, i = window.history.replaceState;
        window.history.pushState = function () {
            t.apply(window.history, arguments), e.apply(e)
        }, window.history.replaceState = function () {
            i.apply(window.history, arguments), e.apply(e)
        };
        var n;
        "on" + (n = window.ActiveXObject || "ActiveXObject" in window ? "hashchange" : "popstate") in window && this.addEvent(window, n, function () {
            setTimeout(e, 0)
        })
    }, Util.prototype.deviceType = function () {
        var e = navigator.userAgent;
        return -1 < e.indexOf("Tablet") && e.indexOf("PC") < 0 || -1 < e.indexOf("Pad") || -1 < e.indexOf("Nexus 7") ? "tablet" : -1 < e.indexOf("Mobi") || -1 < e.indexOf("iPh") || -1 < e.indexOf("480") ? "phone" : "desktop"
    }, Util.prototype.checkTypeList = function (e, t) {
        var i = this.paramType(e);
        if ("String" === i) {
            var n = window.location.href, r = window.location.protocol + "//" + window.location.host,
                o = r + window.location.pathname;
            if (-1 < [n, r, o + "index.html", o, o + window.location.hash].indexOf(e)) return !0
        } else {
            if ("Function" === i) return e.call(e, t);
            if ("Array" === i) for (var a = 0; a < e.length; a++) if (!0 === this.checkTypeList(e[a], t)) return !0
        }
        return !1
    }, Util.prototype.selectorAllEleList = function (e) {
        var t = [], i = e.split(".")[0];
        if ("Function" === this.paramType(document.querySelectorAll) && e.indexOf("|") < 0) try {
            return document.querySelectorAll(e)
        } catch (g) {
        }
        var n = "";
        if (-1 < e.indexOf("#")) {
            n = e.split(".")[0].split("#")[1];
            var r = document.getElementById(n);
            r && t.push(r)
        } else {
            if (e.indexOf(".") < 0) return document.getElementsByTagName(i);
            if (-1 < e.indexOf("[") && -1 < e.indexOf("]")) for (var o = document.getElementsByTagName("*"), a = e.replace("[", "").replace("]", ""), s = 0; s < o.length; s++) {
                var l = o[s].getAttribute(a);
                "String" === this.paramType(l) && t.push(r)
            } else for (var c = document.getElementsByTagName(i), u = 0; u < c.length; u++) {
                var p = c[u], d = "String" === this.paramType(p.className) ? p.className.split(" ") : [];
                0 < d.length && -1 < (i + "." + d.join(".")).indexOf(e) && t.push(p)
            }
        }
        return t
    }, Util.prototype.getDomainFromUrl = function (e, t) {
        if ("" === t) return "";
        var i = (t = t || window.location.hostname).split("/");
        2 < i.length && (t = i[2]);
        if (!0 === /^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t) || "localhost" === t) return "";
        var n = t.split("."), r = !0 === e ? 2 : n.length;
        ("Number" !== this.paramType(r) || r < 2) && (r = 2);
        var o = [];
        if (!(1 < n.length)) return "";
        n.length < r && (r = n.length);
        for (var a = n.length - 1; 0 <= a && o.length !== r; a--) o.push(n[a]);
        return o.reverse().join(".")
    }, Util.prototype.isiOS = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), Util.prototype.delNotHybrid = function (e) {
        return delete e.$is_first_day, delete e.$session_id, delete e.$is_time_calibrated, delete e.$startup_time, e
    }, Util.prototype.getUrlPath = function () {
        var e = window.location.hash;
        return -1 < e.indexOf("?") && (e = e.split("?")[0]), window.location.host + window.location.pathname + e
    }, Util.prototype.detectZoom = function () {
        for (var e = this.selectorAllEleList("meta"), t = 1, i = 0; i < e.length; i++) {
            var n = e[i].getAttribute("content");
            if (n && -1 < n.indexOf("initial-scale=")) for (var r = n.split(","), o = 0; o < r.length; o++) -1 < r[o].indexOf("initial-scale") && (t = parseFloat(r[o].split("=")[1]))
        }
        return t
    };
    var Util$1 = new Util, Local = "", Session = "";
    try {
        Local = "object" == typeof window.localStorage ? window.localStorage : "", Session = "object" == typeof window.sessionStorage ? window.sessionStorage : ""
    } catch (e) {
    }

    function Storage() {
        this.localName = "FZ_STROAGE", this.sessionName = "FZ_SESSION", this.cookieName = "FZ_STROAGE." + Util$1.getDomainFromUrl(baseConfig.base.cross_subdomain), this.checkSubdomain(), this.localObj = this.getLocal(), this.sessionObj = this.getSession()
    }

    Storage.prototype.checkSubdomain = function () {
        var e, t, i, n, r = window.AnalysysAgent || [];
        if ("Array" === Util$1.paramType(r)) for (var o = 0; o < r.length; o++) "cross_subdomain" === r[o][0] && "Boolean" === Util$1.paramType(r[o][1]) && (baseConfig.base.cross_subdomain = r[o][1]);
        r && Util$1.objHasKay(r.config || {}, "cross_subdomain") && (baseConfig.base.cross_subdomain = r.config.cross_subdomain), !0 === baseConfig.base.cross_subdomain && (n = this.getCookie(this.cookieName) || Util$1.encode("{}"), n = JSON.parse(Util$1.decode(decodeURIComponent(n))), "Object" !== Util$1.paramType(n) || Util$1.isEmptyObject(n) || (e = n.ARK_ID, t = {}, !0 === Util$1.objHasKay(n, "ARKSUPER") && (t = n.ARKSUPER, delete n.ARKSUPER), i = Util$1.objMerge(this.localObj || {}, n), !0 !== baseConfig.base.cross_subdomain_super || Util$1.isEmptyObject(t) || (i = Util$1.objMerge({ARKSUPER: t}, i)), this.setLocal(this.localName, i), this.setCookie("ARK_ID", e)))
    }, Storage.prototype.setLocal = function (t, i) {
        this.localObj = this.getLocal(), t === this.localName ? this.localObj = i : this.localObj[t] = i;
        try {
            var n;
            Local ? (Local.setItem(this.localName, Util$1.encode(JSON.stringify(this.localObj))), Session.setItem(this.localName, Util$1.encode(JSON.stringify(this.localObj)))) : "POSTDATA" !== t && this.setCookie(this.cookieName, encodeURIComponent(Util$1.encode(JSON.stringify(this.localObj)))), "POSTDATA" !== t && !0 === baseConfig.base.cross_subdomain && (delete (n = Util$1.toDeep(this.localObj)).POSTDATA, this.setCookie(this.cookieName, encodeURIComponent(Util$1.encode(JSON.stringify(n)))))
        } catch (e) {
        }
    }, Storage.prototype.getLocal = function (t) {
        try {
            var i = Util$1.encode("{}");
            return Local ? (i = Local.getItem(this.localName)) || Session.getItem(this.localName) && (i = Session.getItem(this.localName), Local.setItem(this.localName, i)) : i = (i = this.getCookie(this.cookieName)) ? decodeURIComponent(i) : Util$1.encode(JSON.stringify(this.localObj)), this.localObj = JSON.parse(Util$1.decode(i)), t ? this.localObj[t] : this.localObj
        } catch (e) {
            return t ? "" : {}
        }
    }, Storage.prototype.removeLocal = function (t) {
        var i;
        if (this.localObj = this.getLocal(), Util$1.objHasKay(this.localObj, t) && delete this.localObj[t], Util$1.isEmptyObject(this.localObj)) try {
            Local && (Local.removeItem(this.localName), Session.removeItem(this.localName)), this.removeCookie(this.cookieName)
        } catch (e) {
        } else Local && (Local.setItem(this.localName, Util$1.encode(JSON.stringify(this.localObj))), Session.setItem(this.localName, Util$1.encode(JSON.stringify(this.localObj)))), "POSTDATA" !== t && "ARK_ID" !== t && !0 === baseConfig.base.cross_subdomain && (delete (i = Util$1.toDeep(this.localObj)).POSTDATA, delete i.ARK_ID, this.setCookie(this.cookieName, Util$1.encode(JSON.stringify(i))))
    }, Storage.prototype.setSession = function (t, i) {
        this.sessionObj = this.getSession(), this.sessionObj[t] = i;
        try {
            Session ? (Session.setItem(this.sessionName, Util$1.encode(JSON.stringify(this.sessionObj))), this.removeCookie(this.sessionName)) : "POSTDATA" !== t && this.setCookie(this.sessionName, Util$1.encode(JSON.stringify(this.sessionObj)), "session")
        } catch (e) {
        }
    }, Storage.prototype.getSession = function (t) {
        try {
            var i = Util$1.encode("{}");
            return Session ? (i = Session.getItem(this.sessionName) || Util$1.encode("{}"), this.removeCookie(this.sessionName)) : i = (i = this.getCookie(this.sessionName)) || Util$1.encode(JSON.stringify(this.sessionObj)), this.sessionObj = JSON.parse(Util$1.decode(i)), t ? this.sessionObj[t] : this.sessionObj
        } catch (e) {
            return {}
        }
    }, Storage.prototype.removeSession = function (t) {
        if (this.sessionObj = this.getSession(), Util$1.objHasKay(this.sessionObj, t) && delete this.sessionObj[t], Util$1.isEmptyObject(this.sessionObj)) try {
            Session && Session.removeItem(this.sessionName), this.removeCookie(this.sessionName)
        } catch (e) {
        } else Session && Session.setItem(this.sessionName, Util$1.encode(JSON.stringify(this.sessionObj)))
    }, Storage.prototype.setCookie = function (e, t, i) {
        var n, r = "." + Util$1.getDomainFromUrl(baseConfig.base.cross_subdomain), o = r ? "; domain=" + r : "", a = "";
        "session" !== i && ((n = new Date).setTime(n.getTime() + 31536e6), a = "; expires=" + n.toGMTString()), document.cookie = e + "=" + t + a + "; path=/" + o
    }, Storage.prototype.getCookie = function (e) {
        e = e || this.localName;
        var t = document.cookie;
        if ("string" != typeof t) return "";
        for (var i, n = e + "=", r = t.split(/[;&]/), o = 0; o < r.length; o++) {
            for (i = r[o]; " " === i.charAt(0);) i = i.substring(1, i.length);
            if (0 === i.indexOf(n)) return i.substring(n.length, i.length) || ""
        }
    }, Storage.prototype.removeCookie = function (e, t, i) {
        t = "Boolean" === Util$1.paramType(t) ? t : baseConfig.base.cross_subdomain;
        var n, r, o = "." + Util$1.getDomainFromUrl(t), a = o ? "; domain=" + o : "";
        "session" !== i && ((n = new Date).setTime(n.getTime() - 94608e6), r = "; expires=" + n.toGMTString()), document.cookie = e + "=" + r + "; path=/" + a
    };
    var Storage$1 = new Storage, UTM = {
        utm_campaign_id: Util$1.GetUrlParam("campaign_id"),
        utm_source: Util$1.GetUrlParam("utm_source") || Util$1.GetUrlParam("hmsr"),
        utm_medium: Util$1.GetUrlParam("utm_medium") || Util$1.GetUrlParam("hmpl"),
        utm_term: Util$1.GetUrlParam("utm_term") || Util$1.GetUrlParam("hmkw"),
        utm_content: Util$1.GetUrlParam("utm_content") || Util$1.GetUrlParam("hmci"),
        utm_campaign: Util$1.GetUrlParam("utm_campaign") || Util$1.GetUrlParam("hmcu")
    };

    function clearUTM() {
        UTM = {utm_campaign_id: "", utm_source: "", utm_medium: "", utm_term: "", utm_content: "", utm_campaign: ""}
    }

    function SessionId() {
        this.sessionId = Storage$1.getLocal("SEESIONID") || this.setId(), this.sessionDate = Storage$1.getLocal("SEESIONDATE") || 0
    }

    SessionId.prototype.setId = function () {
        var e = +new Date;
        return this.sessionId = Util$1.MD5("JS" + e.toString() + 1e7 * Math.random()), this.sessionDate = e, Storage$1.setLocal("SEESIONID", this.sessionId), Storage$1.setLocal("SEESIONDATE", this.sessionDate), this.sessionId
    }, SessionId.prototype.getId = function () {
        var e = new Date, t = e.getTime(), i = e.getTimezoneOffset(), n = new Date(t + 60 * i * 1e3 + 288e5).getDate();
        this.sessionDate = Storage$1.getLocal("SEESIONDATE") || 0;
        var r = 0 === this.sessionDate ? 0 : new Date(this.sessionDate + 60 * i * 1e3 + 288e5).getDate();
        return this.sessionId && this.sessionDate && !(18e5 < Number(t) - Number(this.sessionDate)) && n === r || (clearUTM(), this.setId()), this.sessionDate = t, Storage$1.setLocal("SEESIONDATE", t), this.sessionId = Storage$1.getLocal("SEESIONID") || this.setId(), this.sessionId
    };
    var sessionId = new SessionId, UA = navigator.userAgent.toLowerCase();

    function checkSpider() {
        return !!UA.match(/(bot|crawler|spider|scrapy|dnspod|ia_archiver|jiankongbao|slurp|transcoder|networkbench|oneapm|PhantomJS|BingPreview)/i)
    }

    function getId() {
        var e = Storage$1.getLocal("ARK_LOGINID") || Storage$1.getLocal("ARK_TRACKID") || Storage$1.getLocal("ARK_ID");
        return e && "[object Object]" !== e || (e = setUUId(), Storage$1.setLocal("ARK_ID", e)), Storage$1.setCookie("ARK_ID", getIdentifyId() || getUUId()), e
    }

    function setUUId() {
        var e = (new Date).getTime().toString() + (1e4 * Math.random()).toString(),
            t = "JS" + Util$1.MD5(e.toString(), 32) + Util$1.MD5(e.toString(), 32).slice(0, 4);
        return Storage$1.setCookie("ARK_ID", t), t
    }

    function getUUId() {
        var e = Storage$1.getLocal("ARK_ID");
        return e || (e = setUUId(), Storage$1.setLocal("ARK_ID", e)), e
    }

    function removeUUId() {
        Storage$1.removeLocal("ARK_ID")
    }

    function getAliasId() {
        return Storage$1.getLocal("ARK_LOGINID")
    }

    function removeAliasId() {
        Storage$1.removeLocal("ARK_LOGINID")
    }

    function getIdentifyId() {
        return Storage$1.getLocal("ARK_TRACKID")
    }

    function removeIdentifyId() {
        Storage$1.removeLocal("ARK_TRACK_LOGIN"), Storage$1.removeLocal("ARK_TRACKID")
    }

    var base = baseConfig.base;

    function appkey(e) {
        base.appid = e
    }

    function getAppId() {
        return base.appid
    }

    function debugMode(e) {
        base.$debug = e
    }

    function getDebugMode() {
        return base.$debug
    }

    function uploadURL(e) {
        "/" !== e.charAt(e.length - 1) && (e += "/"), base.uploadURL = e
    }

    function getUploadURL() {
        return "/" !== base.uploadURL.charAt(base.uploadURL.length - 1) && (base.uploadURL += "/"), base.uploadURL
    }

    function nowDate() {
        return +new Date + (Storage$1.getLocal("ANSSERVERTIME") ? Number(Storage$1.getLocal("ANSSERVERTIME")) : 0)
    }

    function timeCalibration() {
        return !!Storage$1.getLocal("ANSSERVERTIME")
    }

    function getXwhat() {
        return baseConfig.status.FnName
    }

    function isLogin() {
        var e = !1;
        return (getAliasId() || Storage$1.getLocal("ARK_TRACK_LOGIN")) && (e = !0), e
    }

    var timeZone = "GMT" + Util$1.clientTimeZone(),
        language = (navigator.language || navigator.browserLanguage).toLowerCase();

    function getSessionId() {
        return sessionId.getId()
    }

    function isFirstTime() {
        var e = Storage$1.getLocal("FRISTIME");
        return Storage$1.setLocal("FRISTIME", !1), e
    }

    function isFirstDay() {
        var e = Util$1.format(new Date, "yyyyMMdd"), t = Storage$1.getLocal("FRISTDAY");
        return !t || e === t
    }

    function originalId() {
        return getIdentifyId() || getUUId()
    }

    var referrer = document.referrer || "";

    function setReferrer(e) {
        referrer = e
    }

    function getReferrer() {
        var t = referrer;
        try {
            t = decodeURIComponent(referrer)
        } catch (e) {
        }
        return !0 === baseConfig.base.isHybrid && (t = t.replace(/"/g, '\\"')), t
    }

    function getReferrerDomain() {
        return Util$1.getDomainFromUrl(!1, referrer)
    }

    function getTitle() {
        return document.title
    }

    function startupTime() {
        return Storage$1.getSession("STARTUPTIME") || ""
    }

    function getUrl() {
        var t = window.location.href;
        try {
            t = decodeURIComponent(t)
        } catch (e) {
        }
        return !0 === baseConfig.base.isHybrid && (t = t.replace(/"/g, '\\"')), t
    }

    function getLibVersion() {
        return base.$lib_version
    }

    function getScreenWidth() {
        return "Number" === Util$1.paramType(Number(window.screen.width)) ? Number(window.screen.width) : 0
    }

    function getScreenHeight() {
        return "Number" === Util$1.paramType(Number(window.screen.height)) ? Number(window.screen.height) : 0
    }

    var oldUTM = Storage$1.getSession("ARK_UTM") || "";

    function utmCampaignId() {
        return UTM.utm_campaign_id
    }

    function utmSource() {
        return UTM.utm_source
    }

    function utmMedium() {
        return UTM.utm_medium
    }

    function utmTerm() {
        return UTM.utm_term
    }

    function utmContent() {
        return UTM.utm_content
    }

    function utmCampaign() {
        return UTM.utm_campaign
    }

    UTM.utm_campaign || UTM.utm_source || UTM.utm_medium || UTM.utm_campaign_id || UTM.utm_term || UTM.utm_content ? (oldUTM !== JSON.stringify(UTM) && sessionId.setId(), Storage$1.setSession("ARK_UTM", JSON.stringify(UTM))) : (clearUTM(), Storage$1.removeSession("ARK_UTM"));
    var getField = {
        __proto__: null,
        getAppId: getAppId,
        getId: getId,
        getUploadURL: getUploadURL,
        appkey: appkey,
        debugMode: debugMode,
        uploadURL: uploadURL,
        getDebugMode: getDebugMode,
        nowDate: nowDate,
        getXwhat: getXwhat,
        isLogin: isLogin,
        timeZone: timeZone,
        language: language,
        getSessionId: getSessionId,
        isFirstTime: isFirstTime,
        isFirstDay: isFirstDay,
        originalId: originalId,
        getReferrer: getReferrer,
        getReferrerDomain: getReferrerDomain,
        getTitle: getTitle,
        getUrl: getUrl,
        getScreenWidth: getScreenWidth,
        getScreenHeight: getScreenHeight,
        startupTime: startupTime,
        checkSpider: checkSpider,
        getLibVersion: getLibVersion,
        utmCampaignId: utmCampaignId,
        utmSource: utmSource,
        utmMedium: utmMedium,
        utmTerm: utmTerm,
        utmContent: utmContent,
        utmCampaign: utmCampaign,
        timeCalibration: timeCalibration,
        setReferrer: setReferrer
    }, fieldRules = {
        resetKeywords: ["appid", "$debug", "uploadUrl"],
        uploadURL: {
            valueType: 0,
            value: getUploadURL,
            check: {value: ["isString", "nimLength", "isUrl"], errorCode: "60007", successCode: "20008"}
        },
        appid: {
            valueType: 0,
            value: getAppId,
            check: {value: ["isString", "nimLength"], errorCode: "60006", successCode: "20006"}
        },
        hash: {check: {value: ["isBoolean"], errorCode: "60003"}},
        auto: {check: {value: ["isBoolean"], errorCode: "60003"}},
        autoProfile: {check: {value: ["isBoolean"], errorCode: "60003"}},
        pageProperty: {check: {value: ["isObject"], errorCode: "600016"}},
        xwho: {valueType: 0, value: getId, check: {value: ["isString", "nimLength"]}},
        xwhen: {valueType: 0, value: nowDate},
        xwhat: {valueType: 0, value: getXwhat, check: {value: ["isString", "nimLength"]}},
        xcontext: {
            $lib: {valueType: 1, value: "JS"},
            $lib_version: {valueType: 0, value: getLibVersion, check: {value: ["isString"], successCode: "20007"}},
            $platform: {valueType: 1, value: "JS"},
            $debug: {valueType: 0, value: getDebugMode, check: {value: ["isNumber", "isDebug"]}},
            $is_login: {valueType: 0, value: isLogin, check: {value: ["isBoolean"]}},
            $screen_width: {valueType: 0, value: getScreenWidth, check: {value: ["isNumber"]}},
            $screen_height: {valueType: 0, value: getScreenHeight, check: {value: ["isNumber"]}},
            $time_zone: {valueType: 1, value: timeZone},
            $language: {valueType: 1, value: language},
            $session_id: {valueType: 0, value: getSessionId},
            $is_first_time: {valueType: 0, value: isFirstTime},
            $is_first_day: {valueType: 0, value: isFirstDay},
            $referrer: {valueType: 0, value: getReferrer},
            $referrer_domain: {valueType: 0, value: getReferrerDomain},
            $title: {valueType: 0, value: getTitle},
            $url: {valueType: 0, value: getUrl},
            $startup_time: {valueType: 0, value: startupTime},
            $web_crawler: {valueType: 0, value: checkSpider},
            $original_id: {valueType: 0, value: originalId},
            $utm_campaign_id: {valueType: 0, value: utmCampaignId},
            $utm_source: {valueType: 0, value: utmSource},
            $utm_medium: {valueType: 0, value: utmMedium},
            $utm_term: {valueType: 0, value: utmTerm},
            $utm_content: {valueType: 0, value: utmContent},
            $utm_campaign: {valueType: 0, value: utmCampaign},
            $is_time_calibrated: {valueType: 0, value: timeCalibration}
        },
        xcontextCommonRule: {
            check: {
                key: ["isString", "length99", "notSpecialCharacters", "keywords"],
                value: ["notObject", "isArrayString", "length255"]
            }
        },
        $track: {check: {key: ["isString", "notSpecialCharacters", "length99"]}},
        $alias: {check: {key: ["isString", "keyLength255"]}},
        $profile_increment: {check: {key: ["isString", "length99", "notSpecialCharacters"], value: ["isNumber"]}},
        $profile_unset: {check: {key: ["isString", "length99", "notSpecialCharacters"]}},
        $pageview: {check: {key: ["isString", "keyLength255"]}}
    }, lifecycle = {}, fieldRules$1 = {"visitorConfigURL ": {check: {value: ["isUrl"]}}}, fieldTemplate$1 = {};

    function getElementContent(e, t) {
        var i = "";
        if ("input" === e.tagName.toLowerCase() ? i = e.value || "" : "img" === e.tagName.toLowerCase() ? i = e.getAttribute("alt") || e.getAttribute("title") || "" : "a" === e.tagName.toLowerCase() && (i = e.getAttribute("title") || ""), !i) for (var n = e.childNodes, r = 0; r < n.length; r++) 3 === n[r].nodeType && (i += n[r].nodeValue);
        return i = i && "String" === Util$1.paramType(i) ? i.replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ") : "", "input" === e.tagName.toLowerCase() && "button" !== e.type && "submit" !== e.type && !0 !== t ? "" : i = Util$1.trim(i)
    }

    var errorMessage = {
        common: "{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",
        60001: "{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\n",
        60002: "{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        60003: "{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        60004: "{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        60005: "{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",
        60006: "Please set appkey first.",
        60007: "Please set uploadURL first.",
        60008: "Send message failed.",
        60009: "{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",
        600010: "{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",
        600011: "{FN}:[{KEY}] does not conform to naming rules!",
        600012: "{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",
        600013: "{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        600016: "{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        600017: "{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",
        600018: "{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",
        600019: "{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",
        600020: "{FN}:Property value invalid of key[{KEY}], support type: Boolean/Array/String/Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}"
    }, successMessage = {
        common: "",
        20001: "Send message success",
        20002: "{FN}: set success ({VALUE})",
        20003: "{FN}:({VALUE}) delete success",
        20004: "{FN}:clear success",
        20005: "{FN}:reset success",
        20006: "set appkey success. current appkey : {VALUE}",
        20007: "Init Analysys JS sdk success, version : {VALUE}",
        20008: "set uploadURL success. current uploadURL : {VALUE}",
        20009: "{FN}:[{KEY}] : get failed",
        20010: "{FN}:[{KEY}] : get success. ({VALUE})",
        20011: "{FN}:({VALUE}) delete failed",
        20013: "aliasID already bound"
    };

    function successLog(e) {
        var t, i, n, r, o, a, s;
        1 !== baseConfig.base.$debug && 2 !== baseConfig.base.$debug || (i = (t = baseConfig.status).successCode, n = t.FnName, r = t.key, o = t.value, a = successMessage[i] || successMessage.common, "String" === Util$1.paramType(r) && 30 < r.length && (r = Util$1.stringSlice(r, 30) + "..."), "String" === Util$1.paramType(n) && 30 < n.length && (n = Util$1.stringSlice(n, 30) + "..."), s = a.replace("{FN}", n).replace("{KEY}", r).replace("{VALUE}", o), e && (s = e), s && window.console && window.console.log && window.console.log(s))
    }

    function errorLog() {
        var e, t, i, n, r, o, a, s;
        1 !== baseConfig.base.$debug && 2 !== baseConfig.base.$debug || (t = (e = baseConfig.status).errorCode, i = e.FnName, n = e.key, r = e.value, "Object" === Util$1.paramType(r) && (r = JSON.stringify(r)), o = Util$1.paramType(r), "600018" !== t || n || (t = "600011"), "60005" !== t || n || (t = "600017"), ("600017" === t || "600019" === t || "60009" === t || "600010" === t || "60005" === t) && "String" === Util$1.paramType(r) && r.length && 30 < r.length && (r = Util$1.stringSlice(r, 30) + "..."), "String" === Util$1.paramType(n) && 30 < n.length && (n = Util$1.stringSlice(n, 30) + "..."), "String" === Util$1.paramType(i) && 30 < i.length && (i = Util$1.stringSlice(i, 30) + "..."), a = (errorMessage[t] || errorMessage.common).replace("{FN}", i).replace("{KEY}", n).replace("{VALUE}", r).replace("{VALUETYPE}", o), window.console && window.console.warn && window.console.warn(a), lifecycle$5.errorLog && lifecycle$5.errorLog.init && "60008" !== t && (s = baseConfig.status.FnName, lifecycle$5.errorLog.init(a), baseConfig.status.FnName = s))
    }

    var androidModel = {
        hashCode: "",
        width: 0,
        height: 0,
        aleft: 0,
        atop: 0,
        classes: [],
        clickable: !1,
        alpha: 1,
        hidden: 0,
        text: "",
        subviews: [],
        new_path: [],
        url: ""
    }, iosModel = {
        id: "",
        "class": [],
        properties: {
            alpha: {values: [{value: 1}]},
            userInteractionEnabled: {values: [{value: !0}]},
            enabled: {values: [{value: !0}]},
            hidden: {values: [{value: !1}]},
            subviews: {values: [{value: []}]},
            superview: {values: [{value: 0}]},
            frame: {values: [{value: {AX: 0, AY: 0, Height: 0, Width: 0}}]}
        },
        new_path: [],
        url: "",
        controlEvent: "64"
    }, id = 0, rootId = 0, eleList = [];

    function getDomList(e, t, i) {
        if (1 !== e.nodeType) return null;
        var n = "web" + (0 === id ? rootId : rootId + "" + id), r = e, o = [], a = [], s = e.tagName.toLowerCase(),
            l = !0;
        for (-1 < ["a", "button", "input", "select", "textarea"].indexOf(s) && (l = !1); null !== r;) {
            var c = r.children;
            if (!c) break;
            if (0 < c.length) for (var u = 0; u < c.length; u++) if (id++, 1 === c[u].nodeType && c[u].tagName && ["canvas", "svg", "use", "script", "meta", "style"].indexOf(c[u].tagName.toLowerCase()) < 0) if ("TABLE" === c[u].tagName) for (var p = c[u].children, d = 0; d < p.length; d++) {
                id++;
                var g = getDomList(p[d], n, l), f = getConstantStyle(p[d], "position");
                g && ("absolute" === f ? a.push(g) : o.push(g))
            } else {
                var m = getDomList(c[u], n, l), y = getConstantStyle(c[u], "position");
                m && ("absolute" === y ? a.push(m) : o.push(m))
            }
            o = Util$1.arrayMerge(o, a), r = r.children
        }
        var h = {};
        return (h = (!0 === Util$1.isiOS ? setiOSModel : setAndroidModel)(e, n, t, o, i)).url = Util$1.getUrlPath(), h.root_id = "web" + rootId, "TABLE" !== e.tagName && eleList.push(h), n
    }

    var detect = Util$1.detectZoom();

    function setiOSModel(e, t, i, n, r) {
        var o = JSON.parse(JSON.stringify(iosModel)), a = eleOffset(e);
        o.id = t, o.properties.frame.values[0].value.Width = (e.offsetWidth || e.scrollWidth || e.clientWidth) * detect, o.properties.frame.values[0].value.Height = (e.offsetHeight || e.offsetHeight || e.clientHeight) * detect, o.properties.frame.values[0].value.AX = a.left * detect, o.properties.frame.values[0].value.AY = a.top * detect;
        var s = domParentList(e);
        o.new_path = s.newPath, o["class"] = e.className && "String" === Util$1.paramType(e.className) ? e.className.split(" ") : [], o.eg_text = getElementContent(e), o.properties.enabled.values[0].value = !0, o.properties.subviews.values[0].value = n, o.properties.superview.values[0].value = i, o.bodyWidth = (window.innerWidth || document.body.offsetWidth || document.body.scrollWidth || document.body.clientWidth) * detect, o.bodyHeight = (window.innerHeight || document.body.offsetHeight || document.body.scrollHeight || document.body.clientHeight) * detect, o.bodyScrollTop = a.bodyScrollTop * detect, o.bodyScrollLeft = a.bodyScrollLeft * detect, o.eleScrollTop = a.eleScrollTop * detect, o.eleScrollLeft = a.eleScrollLeft * detect;
        var l = ("" !== e.style.filter ? e.style.filter.match(/opacity:[/S/s]*?\)/)[0] : e.style.opacity) || 1;
        return o.properties.alpha.values[0].value = l, !1 === r && (o.properties.userInteractionEnabled.values[0].value = !1, o.properties.enabled.values[0].value = !1), o
    }

    function setAndroidModel(e, t, i, n, r) {
        var o = JSON.parse(JSON.stringify(androidModel)), a = eleOffset(e), s = domParentList(e);
        return o.new_path = s.newPath, o.hashCode = t, o.parentid = i, o.bodyWidth = (window.innerWidth || document.body.offsetWidth || document.body.scrollWidth || document.body.clientWidth) * detect, o.bodyHeight = (window.innerHeight || document.body.offsetHeight || document.body.scrollHeight || document.body.clientHeight) * detect, o.innerHeight = {
            innerHeight: window.innerHeight,
            scrollHeight: document.body.scrollHeight,
            offsetHeight: document.body.offsetHeight,
            clientHeight: document.body.clientHeight
        }, o.width = (e.offsetWidth || e.scrollWidth || e.clientWidth) * detect, o.height = (e.offsetHeight || e.scrollHeight || e.clientHeight) * detect, o.aleft = (a.left - a.eleScrollLeft) * detect, o.atop = (a.top - a.eleScrollTop) * detect, o.bodyScrollTop = 0, o.bodyScrollLeft = 0, o.eleScrollTop = a.eleScrollTop * detect, o.eleScrollLeft = a.eleScrollLeft * detect, o.clickable = !1 !== r, o.text = getElementContent(e), o.alpha = ("" !== e.style.filter ? e.style.filter.match(/opacity:[/S/s]*?\)/)[0] : e.style.opacity) || 1, o.classes = e.className && "String" === Util$1.paramType(e.className) ? e.className.split(" ") : [], o.subviews = n, o
    }

    function HybridVisual(e) {
        if (eleList = [], rootId = e || +new Date, getDomList(document.body, id), !(id = 0) === Util$1.isiOS) return JSON.stringify(eleList);
        window.AnalysysAgentHybrid.onVisualDomList(JSON.stringify(eleList))
    }

    var HybridAns = {
        visitorEventList: [], visitorProperties: {}, getVisualDomList: function (e) {
            return HybridVisual(e)
        }, onEventList: function (e) {
            e = e || [], "String" === Util$1.paramType(e) && (e = JSON.parse(e));
            for (var t, i = [], n = [], r = 0; r < e.length; r++) {
                1 !== e[r].isAll && e[r].target_page && e[r].target_page !== Util$1.getUrlPath() || (e[r].bindings = e[r].props_binding, i.push(e[r]), t = {
                    eventID: e[r].event_id,
                    eventName: e[r].event_name || ""
                }, n.push(t))
            }
            HybridAns.visitorEventList = i, successLog("Get Visual Event List from app"), successLog(JSON.stringify(n, null, 2))
        }, getProperty: function (e) {
            "String" === Util$1.paramType(e) && (e = JSON.parse(e));
            var t = getRelated(e);
            if (!0 === Util$1.isiOS) return JSON.stringify(t);
            window.AnalysysAgentHybrid.onProperty(JSON.stringify(t))
        }, onProperty: function (e, t) {
            if ("Function" !== Util$1.paramType(HybridAns.visitorProperties[t])) return !1;
            if ("String" === Util$1.paramType(e) && (e = JSON.parse(e)), "Array" === Util$1.paramType(e)) {
                for (var i = {}, n = 0; n < e.length; n++) i = Util$1.objMerge(i, e[n]);
                e = i
            }
            return HybridAns.visitorProperties[t].call(HybridAns.visitorProperties[t], e), delete HybridAns.visitorProperties[t], !0
        }
    };

    function getPath(e) {
        for (var t = e.tagName.toLowerCase(), i = "", n = "String" !== Util$1.paramType(e.className) ? [] : e.className.split(" "), r = 0; r < n.length; r++) n[r] && n[r].indexOf("ARK") < 0 && (i += "." + n[r]);
        return {className: i, id: e.id || "", tagName: t}
    }

    function domParentList(e, t) {
        for (var i, n, r, o = [], a = [], s = e; null != s;) {
            1 === s.nodeType ? (i = getPath(s), !(n = null) !== t && (n = getEleIndex(s)), o.push(i.tagName + (i.id ? "#" + i.id : "") + i.className), r = {
                id: i.id,
                tagName: i.tagName
            }, null !== i.row ? r.row = n.row : r.index = n.index, a.push(Util$1.delEmpty(r)), s = s.parentNode) : s = s.parentNode
        }
        return {path: o.join("<"), newPath: a}
    }

    function getEleIndex(e) {
        for (var t = e.parentNode, i = 0, n = !0, r = null; null !== t && !0 === n;) {
            if (1 === t.nodeType) {
                for (var o = t.children, a = [], s = {}, l = 0; l < o.length; l++) {
                    var c = getPath(o[l]);
                    a.push(c), e === o[l] && (s = c, i = l)
                }
                for (var u = !1, p = 0; p < o.length; p++) a[p].tagName === s.tagName && (u = !0);
                !0 === u && (r = i), n = !1
            } else t = t.parentNode
        }
        return {row: r, index: i}
    }

    function parentContrast(e, t) {
        for (var i = 0; i < e.length; i++) if (e[i].split(".")[0] !== t[i].split(".")[0]) return;
        return 1
    }

    function newPathContrast(e, t, i) {
        var n = e.newPath, r = Util$1.arrayMerge([], n), o = Util$1.arrayMerge([], t), a = Util$1.arrayMerge([], n),
            s = e.ele;
        if (r === o) return !0;
        if (r.length < o.length) return !1;
        if (e.ele && r.length > o.length) {
            if (!0 === i) return !1;
            var l = r.length - o.length;
            r.splice(0, l);
            for (var c = 0; c < l; c++) s = s.parentNode || document.body;
            a = Util$1.arrayMerge([], r)
        }
        for (var u = !0, p = 0; p < o.length;) {
            var d = o[p], g = r[p];
            if (!0 === Util$1.objHasKay(g, "row") && !1 === Util$1.objHasKay(d, "row") && !1 === Util$1.objHasKay(g, "index") && delete g.row, d.id && d.id !== g.id || d.tagName !== g.tagName || g.index !== d.index || g.row !== d.row) {
                u = !1;
                break
            }
            p++
        }
        return !0 === u && (e.newPath = a, e.ele = s), u
    }

    function isClassContrast(e, t) {
        var i = e ? e.className : null;
        return !!("String" === Util$1.paramType(i) && "String" === Util$1.paramType(t) && (i = Util$1.trim(i) || null, t = Util$1.trim(t) || null, i && t && -1 < i.indexOf(t)))
    }

    function bindingContrast(e, t) {
        for (var i = 0; i < t.length; i++) {
            var n = t[i];
            if ("text" === n.prop_name) {
                if (getElementContent(e) !== n.value) return !1
            } else if ("class" === n.prop_name && !isClassContrast(e, n.value)) return !1
        }
        return !0
    }

    function pathContrast(e, t, i) {
        var n = !0, r = !1;
        if (t.bindings = t.bindings || t.props_binding, e.newPath && t.newPath && (r = !0, n = newPathContrast(e, t.newPath, i)), !0 === n && t.bindings && 0 < t.bindings.length && (r = !0, n = bindingContrast(e.ele, t.bindings)), r) return n;
        var o = e.path || e.link, a = t.path || t.link, s = e.index || 0, l = t.index || 0, c = e.ele || null,
            u = t.isText || "";
        if ("" !== u && u !== getElementContent(c)) return !1;
        if (o === a && s === l) return !0;
        var p = o.split("<"), d = a.split("<");
        if (p.length < d.length) return !1;
        if (p.length > d.length) {
            for (var g = p.length - d.length, p = p.splice(g), f = c; 0 < g && f;) f = f.parentNode, g--;
            if (!f) return !1;
            s = setIndex(f, p.join("<"))
        }
        return !(!parentContrast(p, d) || s !== l)
    }

    function parseNewPath(e, t, i) {
        var n = null;
        if (i) if (0 === t) {
            if (1 === e.length) return i;
            n = e.slice(0, e.length - t), i = i.parentNode
        } else for (n = e.slice(0, e.length - 1); 0 < t;) {
            if (!(i = i.parentNode)) return null;
            t--
        } else i = document, n = e;
        for (var r = i, o = n.length - 1; 0 <= o;) {
            var a = n[o], s = a.tagName, l = "Number" === Util$1.paramType(a.row) ? a.row : a.index, c = a.id || "";
            if ("html" === s && (l = 0), "Number" !== Util$1.paramType(l)) return null;
            var u = r.children;
            if (u.length < l) return null;
            if (!(r = u[l]) || c && r.id !== c || "String" === Util$1.paramType(r.tagName) && s !== r.tagName.toLowerCase()) return null;
            o--
        }
        return r
    }

    function parserDom(e) {
        var t = [];
        if (e.indexOf("<") < 0) return [{elePath: e}];
        for (var i = e.split("<"), n = 0; n < i.length; n++) {
            var r = i[n];
            t.push({elePath: r})
        }
        return t
    }

    function getEleScroll(e) {
        for (var t = 0, i = 0; null != e && e !== document.body;) t += e.scrollTop || 0, i += e.scrollLeft || 0, e = e.parentNode;
        return {scrollTop: t, scrollLeft: i}
    }

    function eleOffset(t) {
        for (var i = 0, n = 0, r = getEleScroll(t), o = r.scrollTop, a = r.scrollLeft, s = !1; t && t.tagName && ["canvas", "svg", "use", "script", "meta", "style"].indexOf(t.tagName.toLowerCase()) < 0;) {
            i += t.offsetTop, n += t.offsetLeft;
            try {
                var l = getConstantStyle(t, "transform");
                l && "none" !== l && (n += parseFloat(l.substring(6).split(",")[4]), i += parseFloat(l.substring(6).split(",")[5]))
            } catch (e) {
            }
            try {
                var c = getConstantStyle(t, "position");
                c && "fixed" === c && (s = !0)
            } catch (e) {
            }
            t = t.offsetParent
        }
        return !0 === s && (i += o, n += a, i += document.body.scrollTop || document.documentElement.scrollTop || 0, n += document.body.scrollLeft || document.documentElement.scrollLeft || 0), {
            top: i,
            left: n,
            hidden: !1,
            bodyScrollTop: document.documentElement.scrollTop || document.body.scrollTop || 0,
            bodyScrollLeft: document.documentElement.scrollLeft || document.body.scrollLeft || 0,
            eleScrollTop: o,
            eleScrollLeft: a
        }
    }

    function getConstantStyle(e, t) {
        var i = document.defaultView;
        return i && i.getComputedStyle ? document.defaultView.getComputedStyle(e, null)[t] : e.currentStyle ? e.currentStyle[t] : 0
    }

    function setIndex(e, t) {
        var i = parserDom(t);
        if (0 === i.length) return 0;
        var n = i[0];
        -1 < n.elePath.indexOf("#") && (n.elePath = "#" + n.elePath.split("#")[1]);
        for (var r = Util$1.selectorAllEleList(n.elePath), o = 0, a = 0; a < r.length; a++) {
            if (!0 === pathContrast({path: domParentList(r[a]).path}, {path: t})) {
                if (r[a] === e) return o;
                o++
            }
        }
        return 0
    }

    function backH5PathProPath(e, t) {
        return Util$1.arrayMerge([], t.h5_path)
    }

    function getRelated(e, t, i, n) {
        if (!e) return {};
        "Object" === Util$1.paramType(e) && (e = [e]);
        for (var r, o = {}, a = [], s = {}, l = 0; l < e.length; l++) {
            var c, u, p, d = e[l], g = d.target.h5_path, f = d.target.step;
            g ? (u = (c = parseNewPath(g, f, n)) ? getElementContent(c, !0) : "", p = getProperties(d.properties, u), o = Util$1.objMerge(o, p)) : a.push(d)
        }
        if (0 < a.length) {
            if (!1 !== Util$1.isiOS) return HybridAns.visitorProperties[i] = (r = o, function (e) {
                r = Util$1.objMerge(r, e), t(r)
            }), void (window.AnalysysModule && !0 === window.AnalysysModule.moduleStatus ? window.AnalysysModule.getPro(a, i) : window.webkit.messageHandlers.AnalysysAgentGetProperty.postMessage([JSON.stringify(a), i]));
            s = window.AnalysysAgentHybrid.getProperty(JSON.stringify(a)), "String" === Util$1.paramType(s) && (s = JSON.parse(s)), o = Util$1.objMerge(o, s)
        } else !0 === Util$1.isiOS && !0 === baseConfig.base.isHybrid && t && t(o);
        return o
    }

    function getProperties(t, i) {
        for (var n = {}, r = 0; r < t.length; r++) {
            var o = t[r], a = o.prop_type;
            i = !0 === Util$1.objHasKay(o, "value") ? o.value : i;
            var s = o.regex, l = o.key;
            if (s) try {
                s = Util$1.decode(s), i = new RegExp(s).exec(i)
            } catch (e) {
            }
            if ("number" === a) try {
                i = Number(i)
            } catch (e) {
            } else if ("bool" === a) "Boolean" !== Util$1.paramType(i) && ("true" === i || "1" === i ? i = !0 : "false" !== i && "0" !== i || (i = !1)); else try {
                i = i.toString()
            } catch (e) {
            }
            n[l] = i
        }
        return n
    }

    function backEasyPath(e) {
        for (var t = [], i = 0; i < e.length; i++) t.push(e[i].tagName);
        return t.join(">")
    }

    function checkNewPathBase(e, t) {
        if (!t) return !!e;
        var i = JSON.parse(JSON.stringify(e)), n = JSON.parse(JSON.stringify(t));
        i.reverse(), n.reverse();
        var r = backEasyPath(i), o = backEasyPath(n);
        return -1 < r.indexOf(o)
    }

    function getJSON(t) {
        if ("String" !== Util$1.paramType(t)) return "Object" === Util$1.paramType(t) ? t : {code: 200};
        -1 < t.indexOf("\n") && (t = t.replace(/[\r\n]/g, ""));
        try {
            return JSON.parse(t)
        } catch (e) {
        }
        try {
            return window.AnalysysModule.zipInflate(t)
        } catch (e) {
        }
        return "H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA=" === t ? {code: 200} : "H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA=" === t ? {code: 500} : "H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA==" === t ? {code: 420} : {code: 200}
    }

    function GetHttpObj() {
        var t = null;
        if (window.XDomainRequest) return new window.XDomainRequest;
        if (window.XMLHttpRequest) t = new window.XMLHttpRequest; else try {
            t = new window.ActiveXObject("Microsoft.XMLHTTP")
        } catch (e) {
            try {
                t = new window.ActiveXObject("Msxml2.XMLHTTP")
            } catch (i) {
                t = new window.XMLHttpRequest
            }
        }
        return t
    }

    function xmlhttp(t) {
        var n, r, i, o = !1, a = new GetHttpObj;
        a.onload = function () {
            o || (o = !0, t.success(getJSON(a.responseText), a))
        }, a.onerror = function () {
            o || (o = !0, t.error(getJSON(a.responseText), a))
        }, a.onreadystatechange = (n = a, r = t, function () {
            if (4 === n.readyState) {
                try {
                    var t, i;
                    (-1 < n.getAllResponseHeaders().indexOf("Date") || -1 < n.getAllResponseHeaders().indexOf("date")) && (t = +new Date, (i = n.getResponseHeader("Date") || n.getResponseHeader("date")) && !0 === baseConfig.base.allowTimeCheck ? Storage$1.setLocal("ANSSERVERTIME", new Date(i) - t) : Storage$1.setLocal("ANSSERVERTIME", 0))
                } catch (e) {
                }
                if (200 <= n.status && n.status < 300 || 304 === n.status) {
                    if (o) return;
                    o = !0, r.success(getJSON(n.responseText), n)
                } else {
                    if (o) return;
                    o = !0, r.error()
                }
                n.onreadystatechange = null, n.onload = null
            }
        });
        try {
            a.open(t.type, t.url, !0);
            try {
                a.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
            } catch (e) {
            }
            var s = baseConfig.base.sendDataTimeout;
            "GET" === t.type ? (s = baseConfig.base.getDataTimeout, a.send(null)) : a.send(t.data), "Number" === Util$1.paramType(s) && ("Number" === Util$1.paramType(a.timeout) ? a.timeout = s : (i = a, setTimeout(function () {
                i.abort()
            }, s)))
        } catch (e) {
        }
    }

    function ajax() {
        this.url = "", this.data = "", this.type = "GET", this.success = function () {
        }, this.error = function () {
        }
    }

    function getMsg(n) {
        Util$1.addEvent(window, "message", function (t) {
            var i = t.data;
            try {
                "String" === Util$1.paramType(i) && (i = JSON.parse(i))
            } catch (e) {
            }
            console.log("鑾峰彇鍙鍖栨秷鎭�===>", JSON.stringify(i, null, 2)), n(i)
        })
    }

    ajax.prototype.get = function (e) {
        var t = [];
        for (var i in e.data) t.push(i + "=" + encodeURIComponent(e.data[i]));
        var n = -1 < e.url.indexOf("?") ? e.url + "&" + t.join("&") : e.url + "?" + t.join("&");
        this.url = n, this.data = e.data, this.type = "GET", this.success = e.success || function () {
        }, this.error = e.error || function () {
        }, xmlhttp(this)
    }, ajax.prototype.post = function (e) {
        this.url = e.url, this.data = e.data, this.type = "POST", this.success = e.success || function () {
        }, this.error = e.error || function () {
        }, xmlhttp(this)
    };
    var visitorConfig = {}, patt = /\d{13}/g,
        clickEleObj = {path: "", index: 0, ele: null, newPath: {}, elePostion: {}};

    function loadVisitorSDK() {
        var t = [], i = function i(e) {
            window.AnalysysModule && window.AnalysysModule.visual ? window.AnalysysModule.visual.msg(e) : t.push(e)
        }, n = function n() {
            if (window.AnalysysModule && window.AnalysysModule.visual) for (var e = 0; e < t.length; e++) window.AnalysysModule.visual.msg(t[e])
        };
        Util$1.addScript("AnalysysAgent_JS_SDK_VISUAL", visitorConfig.SDKFileDirectory, n), window.ARK_VISUAL = {config: visitorConfig}, Storage$1.setSession("visitor", !0), getMsg(i)
    }

    function IsReverse(e) {
        return e.split("").reverse().join("")
    }

    function checkPointBase(e, t) {
        var i = IsReverse(e), n = IsReverse(t);
        return -1 < i.indexOf(n)
    }

    function addElesListener() {
        !0 === visitorConfig.isHybrid && (visitorEventList = HybridAns.visitorEventList);
        var e = domParentList(clickEleObj.ele), t = parsePath(e.path);
        clickEleObj.elePath = t.clickPath, clickEleObj.path = e.path, clickEleObj.newPath = e.newPath;
        for (var i = [], n = 0; n < visitorEventList.length; n++) {
            var r = Util$1.toDeep(visitorEventList[n]);
            r.newPath = r.new_path;
            var o = r.path, a = r.index, s = r.newPath, l = r.bindings, c = r.eleClass, u = !1;
            (s || l) && 1 == checkNewPathBase(clickEleObj.newPath, s) && !0 === pathContrast(clickEleObj, r) ? u = !0 : s || l || !0 !== checkPointBase(clickEleObj.elePath, o) || (clickEleObj.index = setIndex(clickEleObj.ele, clickEleObj.path), (c === clickEleObj.eleClass && a === clickEleObj.index || !0 === pathContrast(clickEleObj, r)) && (u = !0)), !0 === u && (r.ele = clickEleObj.ele, r.elePostion = clickEleObj.elePostion, i.push(r))
        }
        for (var p = 0; p < i.length; p++) {
            var d = i[p], g = d.new_path, f = d.bindings, m = d.ele, y = d.appEventId || d.event_id, h = d.isText;
            if (g || f) {
                var b = "Track" + +new Date, v = function (t, i, n) {
                    return function (e) {
                        e = e || {}, i && 0 < i.length && (e = Util$1.objMerge(e, getProperties(i))), e = Util$1.delEmpty(e), !0 === visitorConfig.isHybrid ? !0 === Util$1.isiOS && window.AnalysysModule && !0 === window.AnalysysModule.moduleStatus ? window.AnalysysModule.track(t, e, n) : !0 === Util$1.isiOS ? window.webkit.messageHandlers.AnalysysAgentTrack.postMessage([t, JSON.stringify(e), JSON.stringify(n)]) : window.AnalysysAgentHybrid.AnalysysAgentTrack(t, JSON.stringify(e), JSON.stringify(n)) : window.AnalysysAgent.track(t, e)
                    }
                }(y, d.properties, d.elePostion);
                if (d.related && 0 < d.related.length) for (var $ = 0; $ < d.related.length; $++) {
                    var w = d.related[$].target;
                    w.h5_path && (w.path = w.h5_path, d.related[$].target.h5_path = backH5PathProPath(d.newPath, w))
                } else d.related = [];
                if (!0 === Util$1.isiOS && !0 === visitorConfig.isHybrid) return void getRelated(d.related, v, b, m);
                v(getRelated(d.related, null, null, m))
            } else {
                h && h !== getElementContent(m) || window.AnalysysAgent.track(y)
            }
        }
    }

    var visitorEventList = [];

    function getVisitorEvent() {
        var e, t, i;
        !0 === visitorConfig.isHybrid ? window.AnalysysModule && !0 === window.AnalysysModule.moduleStatus ? window.AnalysysModule.eventList() : !0 === Util$1.isiOS && window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.AnalysysAgentGetEventList ? window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.AnalysysAgentGetEventList.postMessage([]) : !window.AnalysysAgentHybrid || (e = window.AnalysysAgentHybrid.getEventList()) && HybridAns.onEventList(e) : visitorConfig.visitorConfigURL && ((t = window.location.hash) && -1 < t.indexOf("?") && (t = t.split("?")[0]), i = window.location.protocol + "//" + window.location.host + window.location.pathname + t, visitorEventList = [], getPoint(i))
    }

    function parsePath(e) {
        for (var t = e.split("<"), i = t[0].split(".")[1] || "", n = [], r = 0; r < t.length; r++) n.push(t[r].split(".")[0]);
        return {"class": i, clickPath: n.join("<")}
    }

    function getPoint(e) {
        var d = visitorConfig.visitorConfigURL + "configure", g = function g(e) {
            if (0 === (e = visitorConfig.visitorEventList || e).code) {
                for (var t = [], i = [], n = 0; n < e.data.length; n++) {
                    var r = e.data[n], o = parsePath(r.link), a = r.index, s = o.clickClass, l = o.clickPath,
                        c = r.isText, u = r.link;
                    !0 === patt.test(u) && (u = u.replace(patt, "")), t.push({
                        index: a,
                        eleClass: s,
                        elePath: l,
                        isText: c,
                        path: u,
                        appEventId: r.appEventId,
                        new_path: r.new_path,
                        bindings: r.props_binding,
                        related: r.related,
                        properties: r.properties
                    });
                    var p = {eventID: r.appEventId, eventName: r.appEventName || ""};
                    i.push(p)
                }
                visitorEventList = t, successLog("Get Visual Event List from " + d), successLog(JSON.stringify(i, null, 2))
            }
        }, t = {
            url: d, data: {appkey: visitorConfig.appid, lib: "Js", url: e}, success: g, error: function () {
            }
        };
        (new ajax).get(t)
    }

    var url = window.location.href, detect$1 = Util$1.detectZoom();

    function pcMouseOver(e) {
        var t = !1;
        e.touches && 0 < e.touches.length && (e = e.touches[0], t = !0);
        for (var i = e.target || e.srcElement, n = "String" !== Util$1.paramType(i.className) ? [] : i.className.split(" "), r = "", o = 0; o < n.length; o++) n[o] && n[o].indexOf("ARK") < 0 && (r += "." + n[o]);
        (clickEleObj = {ele: i, eleClass: r, index: 0}).elePostion = {
            $pos_left: e.clientX * detect$1,
            $pos_top: e.clientY * detect$1,
            $pos_width: i.offsetWidth * detect$1,
            $pos_height: i.offsetHeight * detect$1
        }, t ? addElesListener() : Util$1.addEvent(i, "mousedown", addElesListener, !0)
    }

    function pcMouseOut(e) {
        var t = (e = e || window.event).target || e.srcElement;
        clickEleObj = {}, Util$1.removeEvent(t, "mousedown", addElesListener, !0)
    }

    function addEventListener() {
        "desktop" === Util$1.deviceType() && !1 === visitorConfig.isHybrid ? (Util$1.addEvent(document, "mouseover", pcMouseOver, !0), Util$1.addEvent(document, "mouseout", pcMouseOut, !0)) : Util$1.addEvent(document, "touchstart", pcMouseOver, !0), Util$1.changeHash(function () {
            url !== window.location.href && (url = window.location.href, getVisitorEvent())
        })
    }

    function visitorInit(e) {
        return (visitorConfig = e).visitorConfigURL = Util$1.trim(visitorConfig.visitorConfigURL), !1 === e.isHybrid && window.self !== window.top && (Util$1.GetUrlParam("visual") || !0 === Storage$1.getSession("visitor") && window.location.href.indexOf("arkheatmap=true") < 0) ? document.getElementById("AnalysysAgent_JS_SDK_VISUAL") || loadVisitorSDK() : !visitorConfig.visitorConfigURL && !0 !== e.isHybrid || (visitorConfig.visitorConfigURL && "/" !== visitorConfig.visitorConfigURL.charAt(visitorConfig.visitorConfigURL.length - 1) && (visitorConfig.visitorConfigURL += "/"), getVisitorEvent(), addEventListener()), e
    }

    var lifecycle$1 = {AnalysysAgent: {init: visitorInit}},
        visitor = {__proto__: null, fieldRules: fieldRules$1, fieldTemplate: fieldTemplate$1, lifecycle: lifecycle$1},
        startDate = +new Date, root = null;

    function setRootEle(e) {
        root = e || document.body
    }

    function getViewPortWidth() {
        return document.documentElement.clientWidth || document.body.clientWidth
    }

    function getViewPortHeight() {
        return document.documentElement.clientHeight || document.body.clientHeight
    }

    function getScrollTop() {
        return root.scrollTop || document.documentElement.scrollTop || document.body.scrollTop
    }

    function getDuration() {
        var e = +new Date, t = e - startDate;
        if (startDate = e, "Number" === Util$1.paramType(baseConfig.base.webstayDuration) && 0 < baseConfig.base.webstayDuration) {
            if (t > baseConfig.base.webstayDuration) return baseConfig.base.webstayDuration
        } else if (18e6 < t) return 18e6;
        return t
    }

    function getDeviceType() {
        return Util$1.deviceType()
    }

    var fieldRules$2 = {
            autoWebstay: {check: {value: ["isBoolean"]}},
            xcontext: {
                $viewport_width: {valueType: 0, value: getViewPortWidth},
                $viewport_position: {valueType: 0, value: getScrollTop},
                $viewport_height: {valueType: 0, value: getViewPortHeight},
                $event_duration: {valueType: 0, value: getDuration},
                $device_type: {valueType: 0, value: getDeviceType}
            }
        },
        fieldTemplate$2 = {$webstay: {xcontext: ["$referrer", "$referrer_domain", "$title", "$url", "$viewport_width", "$viewport_position", "$viewport_height", "$event_duration", "$device_type", "$session_id", "$is_time_calibrated", "$is_first_day"]}},
        elePostion = {ele: "", click_x: 0, click_y: 0, clickEle: ""}, Lm, Mm, Nm, Om;

    function domParentList$1(e) {
        for (var t = [], i = e; null != i;) {
            var n = 0;
            if (i.parentNode) {
                var r = i.parentNode.children;
                if (r) for (var o = 0; o < r.length; o++) r[o] === i && (n = o)
            }
            var a = i.tagName;
            if (a) {
                a = a.toLowerCase();
                var s = i.id ? "#" + i.id : "",
                    l = i.className && "String" === Util$1.paramType(i.className) ? i.className.split(" ") : [];
                if (0 < l.length) {
                    for (var c = "", u = 0; u < l.length; u++) l[u] && l[u].indexOf("ARK") < 0 && (c += "." + l[u]);
                    t.push(a + s + c + "|" + n)
                } else t.push(a + s + "|" + n);
                i = i.parentNode
            } else i = i.parentNode
        }
        return t.join("<")
    }

    function getPageWidth() {
        return document.documentElement.scrollWidth
    }

    function getPageHeight() {
        return document.documentElement.scrollHeight
    }

    function getClickX() {
        return elePostion.click_x
    }

    function getClickY() {
        return elePostion.click_y
    }

    function getElementPath() {
        return domParentList$1(elePostion.ele)
    }

    function getUrlPath() {
        var t = window.location.protocol + "//" + window.location.host + window.location.pathname + window.location.hash;
        try {
            t = decodeURIComponent(t)
        } catch (e) {
        }
        return !0 === baseConfig.base.isHybrid && (t = t.replace(/"/g, '\\"')), t
    }

    function getElementX() {
        return elePostion.elementX
    }

    function getElementY() {
        return elePostion.elementY
    }

    function getElementType() {
        return elePostion.ele.tagName.toLowerCase()
    }

    function getElementClick() {
        return "Function" === Util$1.paramType(elePostion.ele.onclick)
    }

    function getElementAttrClick() {
        return elePostion.ele && null !== elePostion.ele.getAttribute("data-ark-click")
    }

    function checkElementConfig(e) {
        if (!e || "Array" === Util$1.paramType(e) && 0 === e.length || "String" === Util$1.paramType(e) && "" === e) return !1;
        var t = elePostion.ele;
        if ("String" === Util$1.paramType(e)) {
            var i = t.tagName.toLowerCase(),
                n = "String" === Util$1.paramType(t.className) ? "." + t.className.split(" ").join(".") : "",
                r = t.id ? "#" + t.id : "";
            if (i === e.toLowerCase() || n === e || r === e || i + n === e || i + r === e || r + n === e || i + r + n === e) return !0
        } else if ("Array" === Util$1.paramType(e)) {
            for (var o = 0; o < e.length; o++) if (!0 === checkElementConfig(e[o])) return !0
        } else {
            if ("Function" === Util$1.paramType(e)) return e.call(e, t) || !1;
            if ("object" == typeof e && e === t) return !0
        }
        return !1
    }

    function getParentClickableElement() {
        for (var e = elePostion.ele; null != elePostion.ele;) if (1 === elePostion.ele.nodeType) {
            if (getElementClick() || 1 === getElementClickable() || getElementAttrClick() || checkElementConfig(baseConfig.base.trackList)) {
                e = elePostion.ele;
                break
            }
            elePostion.ele = elePostion.ele.parentNode
        } else elePostion.ele = elePostion.ele.parentNode;
        elePostion.ele = e
    }

    function getElementClickable() {
        var e = getElementType();
        if (-1 < ["a", "button", "input", "select", "textarea", "svg"].indexOf(e) || getElementAttrClick() || checkElementConfig(baseConfig.base.trackList)) {
            if ("svg" === e && elePostion.ele.children && 0 < elePostion.ele.children.length) {
                for (var t = 0, i = elePostion.ele.children, n = 0; n < i.length; n++) "use" === i[n].tagName.toLowerCase() && (i[n].getAttribute("xlink:href") || getElementAttrClick() || checkElementConfig(baseConfig.base.trackList)) && (t = 1);
                return t
            }
            return 1
        }
        return 0
    }

    function getEleContent() {
        return getElementContent(elePostion.ele)
    }

    function getDeviceType$1() {
        return Util$1.deviceType()
    }

    function getElementId() {
        return elePostion.ele.id || elePostion.ele.getAttribute("id") || ""
    }

    function getElementName() {
        return elePostion.ele.getAttribute("name") || ""
    }

    function getElementClassName() {
        var e = elePostion.ele.getAttribute("class") || "";
        if (e) {
            for (var t = e.split(" "), i = [], n = 0; n < t.length; n++) "" !== t[n] && i.push(t[n]);
            return e = "." + i.join(".")
        }
        return ""
    }

    function getElementTargetUrl() {
        var t = elePostion.ele.getAttribute("href");
        if (t && t.indexOf("javascript:") < 0) {
            try {
                t = decodeURIComponent(t)
            } catch (e) {
            }
            return !0 === baseConfig.base.isHybrid && (t = t.replace(/"/g, '\\"')), t
        }
        return ""
    }

    function Km(t) {
        try {
            return t.defaultView && t.defaultView.frameElement || null
        } catch (e) {
            return null
        }
    }

    function Pm(e) {
        this.time = e.time, this.target = e.target, this.rootBounds = Ym(e.rootBounds), this.boundingClientRect = Ym(e.boundingClientRect), this.intersectionRect = Ym(e.intersectionRect || Xm()), this.isIntersecting = !!e.intersectionRect;
        var t = this.boundingClientRect, i = t.width * t.height, n = this.intersectionRect, r = n.width * n.height;
        this.intersectionRatio = i ? Number((r / i).toFixed(4)) : this.isIntersecting ? 1 : 0
    }

    function Qm(e, t) {
        var i, n, r, o = t || {};
        if ("function" != typeof e) throw new Error("callback must be a function");
        if (o.root && 1 != o.root.nodeType) throw new Error("root must be an Element");
        this._checkForIntersections = (i = this._checkForIntersections.bind(this), n = this.THROTTLE_TIMEOUT, r = null, function () {
            r = r || setTimeout(function () {
                i(), r = null
            }, n)
        }), this._callback = e, this._observationTargets = [], this._queuedEntries = [], this._rootMarginValues = this._parseRootMargin(o.rootMargin), this.thresholds = this._initThresholds(o.threshold), this.root = o.root || null, this.rootMargin = this._rootMarginValues.map(function (e) {
            return e.value + e.unit
        }).join(" "), this._monitoringDocuments = [], this._monitoringUnsubscribes = []
    }

    function Tm(e, t, i, n) {
        "function" == typeof e.addEventListener ? e.addEventListener(t, i, n || !1) : "function" == typeof e.attachEvent && e.attachEvent("on" + t, i)
    }

    function Um(e, t, i, n) {
        "function" == typeof e.removeEventListener ? e.removeEventListener(t, i, n || !1) : "function" == typeof e.detatchEvent && e.detatchEvent("on" + t, i)
    }

    function Wm(e) {
        var t;
        try {
            t = e.getBoundingClientRect()
        } catch (i) {
        }
        return t ? (t.width && t.height || (t = {
            top: t.top,
            right: t.right,
            bottom: t.bottom,
            left: t.left,
            width: t.right - t.left,
            height: t.bottom - t.top
        }), t) : Xm()
    }

    function Xm() {
        return {top: 0, bottom: 0, left: 0, right: 0, width: 0, height: 0}
    }

    function Ym(e) {
        return !e || "x" in e ? e : {
            top: e.top,
            y: e.top,
            bottom: e.bottom,
            left: e.left,
            x: e.left,
            right: e.right,
            width: e.width,
            height: e.height
        }
    }

    function Zm(e, t) {
        var i = t.top - e.top, n = t.left - e.left;
        return {top: i, left: n, height: t.height, width: t.width, bottom: i + t.height, right: n + t.width}
    }

    function $m(e, t) {
        for (var i = t; i;) {
            if (i == e) return !0;
            i = _m(i)
        }
        return !1
    }

    function _m(e) {
        var t = e.parentNode;
        return 9 == e.nodeType && e != Lm ? Km(e) : t && 11 == t.nodeType && t.host ? t.host : t && t.assignedSlot ? t.assignedSlot.parentNode : t
    }

    function eleCss(e, t) {
        var i, n, r, o;
        if (e) {
            if ("string" == typeof t) return getConstantStyle$1(e, t);
            if (Array.isArray(t)) {
                for (r = {}, o = 0, i = t.length; o < i; o++) r[n = t[o]] = getConstantStyle$1(e, n);
                return r
            }
        }
    }

    function eleScroll(e) {
        for (var t = 0, i = 0; null != e && e !== document.body;) 1 === e.nodeType && (t += e.scrollTop, i += e.scrollLeft), e = e.parentNode;
        return {scrollLeft: i, scrollTop: t}
    }

    function eleOffset$1(e) {
        for (var t = 0, i = 0, n = !1, r = !1; null != e;) t += e.offsetTop, i += e.offsetLeft, n = n || !("none" !== eleCss(e, "display") && "0px" !== eleCss(e, "width") && "0px" !== eleCss(e, "height")), "fixed" === eleCss(e, "position") && (r = !0), e = e.offsetParent;
        return !0 === r && (t += document.documentElement.scrollTop || document.body.scrollTop, i += document.documentElement.scrollLeft || document.body.scrollLeft), {
            top: t,
            left: i,
            hidden: n
        }
    }

    function isElmentReady() {
        return !!(document && document.documentElement && document.getElementsByTagName && document.getElementById && document.body && 0 !== document.documentElement.scrollWidth)
    }

    function getConstantStyle$1(e, t) {
        var i = document.defaultView;
        return i && i.getComputedStyle ? document.defaultView.getComputedStyle(e, null)[t] : e.currentStyle[t]
    }

    "object" == typeof window && ("IntersectionObserver" in window && "IntersectionObserverEntry" in window && "intersectionRatio" in window.IntersectionObserverEntry.prototype ? "isIntersecting" in window.IntersectionObserverEntry.prototype || Object.defineProperty(window.IntersectionObserverEntry.prototype, "isIntersecting", {
        get: function () {
            return 0 < this.intersectionRatio
        }
    }) : (Lm = function () {
        for (var e = window.document, t = Km(e); t;) t = Km(e = t.ownerDocument);
        return e
    }(), Mm = [], Om = Nm = null, Qm.prototype.THROTTLE_TIMEOUT = 100, Qm.prototype.POLL_INTERVAL = null, Qm.prototype.USE_MUTATION_OBSERVER = !0, Qm._setupCrossOriginUpdater = function () {
        return Nm = Nm || function (e, t) {
            Om = e && t ? Zm(e, t) : Xm(), Mm.forEach(function (e) {
                e._checkForIntersections()
            })
        }
    }, Qm._resetCrossOriginUpdater = function () {
        Om = Nm = null
    }, Qm.prototype.observe = function (t) {
        if (!this._observationTargets.some(function (e) {
            return e.element == t
        })) {
            if (!t || 1 != t.nodeType) throw new Error("target must be an Element");
            this._registerInstance(), this._observationTargets.push({
                element: t,
                entry: null
            }), this._monitorIntersections(t.ownerDocument), this._checkForIntersections()
        }
    }, Qm.prototype.unobserve = function (t) {
        this._observationTargets = this._observationTargets.filter(function (e) {
            return e.element != t
        }), this._unmonitorIntersections(t.ownerDocument), 0 == this._observationTargets.length && this._unregisterInstance()
    }, Qm.prototype.disconnect = function () {
        this._observationTargets = [], this._unmonitorAllIntersections(), this._unregisterInstance()
    }, Qm.prototype.takeRecords = function () {
        var e = this._queuedEntries.slice();
        return this._queuedEntries = [], e
    }, Qm.prototype._initThresholds = function (e) {
        var t = e || [0];
        return Array.isArray(t) || (t = [t]), t.sort().filter(function (e, t, i) {
            if ("number" != typeof e || isNaN(e) || e < 0 || 1 < e) throw new Error("threshold must be a number between 0 and 1 inclusively");
            return e !== i[t - 1]
        })
    }, Qm.prototype._parseRootMargin = function (e) {
        var t = (e || "0px").split(/\s+/).map(function (e) {
            var t = /^(-?\d*\.?\d+)(px|%)$/.exec(e);
            if (!t) throw new Error("rootMargin must be specified in pixels or percent");
            return {value: parseFloat(t[1]), unit: t[2]}
        });
        return t[1] = t[1] || t[0], t[2] = t[2] || t[0], t[3] = t[3] || t[1], t
    }, Qm.prototype._monitorIntersections = function (t) {
        var i, n, r, e, o = t.defaultView;
        o && -1 == this._monitoringDocuments.indexOf(t) && (i = this._checkForIntersections, r = n = null, this.POLL_INTERVAL ? n = o.setInterval(i, this.POLL_INTERVAL) : (Tm(o, "resize", i, !0), Tm(t, "scroll", i, !0), this.USE_MUTATION_OBSERVER && "MutationObserver" in o && (r = new o.MutationObserver(i)).observe(t, {
            attributes: !0,
            childList: !0,
            characterData: !0,
            subtree: !0
        })), this._monitoringDocuments.push(t), this._monitoringUnsubscribes.push(function () {
            var e = t.defaultView;
            e && (n && e.clearInterval(n), Um(e, "resize", i, !0)), Um(t, "scroll", i, !0), r && r.disconnect()
        }), t == (this.root && this.root.ownerDocument || Lm) || (e = Km(t)) && this._monitorIntersections(e.ownerDocument))
    }, Qm.prototype._unmonitorIntersections = function (n) {
        var r, e, t, i = this._monitoringDocuments.indexOf(n);
        -1 != i && (r = this.root && this.root.ownerDocument || Lm, this._observationTargets.some(function (e) {
            if ((t = e.element.ownerDocument) == n) return !0;
            for (; t && t != r;) {
                var t, i = Km(t);
                if ((t = i && i.ownerDocument) == n) return !0
            }
            return !1
        }) || (e = this._monitoringUnsubscribes[i], this._monitoringDocuments.splice(i, 1), this._monitoringUnsubscribes.splice(i, 1), e(), n == r || (t = Km(n)) && this._unmonitorIntersections(t.ownerDocument)))
    }, Qm.prototype._unmonitorAllIntersections = function () {
        var e = this._monitoringUnsubscribes.slice(0);
        this._monitoringDocuments.length = 0;
        for (var t = this._monitoringUnsubscribes.length = 0; t < e.length; t++) e[t]()
    }, Qm.prototype._checkForIntersections = function () {
        var s, l;
        !this.root && Nm && !Om || (s = this._rootIsInDom(), l = s ? this._getRootRect() : Xm(), this._observationTargets.forEach(function (e) {
            var t = e.element, i = Wm(t), n = this._rootContainsTarget(t), r = e.entry,
                o = s && n && this._computeTargetAndRootIntersection(t, i, l), a = e.entry = new Pm({
                    time: window.performance && performance.now && performance.now(),
                    target: t,
                    boundingClientRect: i,
                    rootBounds: Nm && !this.root ? null : l,
                    intersectionRect: o
                });
            r ? s && n ? this._hasCrossedThreshold(r, a) && this._queuedEntries.push(a) : r && r.isIntersecting && this._queuedEntries.push(a) : this._queuedEntries.push(a)
        }, this), this._queuedEntries.length && this._callback(this.takeRecords(), this))
    }, Qm.prototype._computeTargetAndRootIntersection = function (e, t, i) {
        if ("none" != window.getComputedStyle(e).display) {
            for (var n, r, o, a, s, l, c, u, p = t, d = _m(e), g = !1; !g && d;) {
                var f, m, y, h, b = null, v = 1 == d.nodeType ? window.getComputedStyle(d) : {};
                if ("none" == v.display) return null;
                if (d == this.root || 9 == d.nodeType ? (g = !0, d == this.root || d == Lm ? Nm && !this.root ? !Om || 0 == Om.width && 0 == Om.height ? p = b = d = null : b = Om : b = i : (m = (f = _m(d)) && Wm(f), y = f && this._computeTargetAndRootIntersection(f, m, i), m && y ? (d = f, b = Zm(m, y)) : p = d = null)) : d != (h = d.ownerDocument).body && d != h.documentElement && "visible" != v.overflow && (b = Wm(d)), b && (n = b, r = p, 0, o = Math.max(n.top, r.top), a = Math.min(n.bottom, r.bottom), s = Math.max(n.left, r.left), l = Math.min(n.right, r.right), u = a - o, p = 0 <= (c = l - s) && 0 <= u ? {
                    top: o,
                    bottom: a,
                    left: s,
                    right: l,
                    width: c,
                    height: u
                } : null), !p) break;
                d = d && _m(d)
            }
            return p
        }
    }, Qm.prototype._getRootRect = function () {
        var e, t, i;
        return i = this.root ? Wm(this.root) : (e = Lm.documentElement, t = Lm.body, {
            top: 0,
            left: 0,
            right: e.clientWidth || t.clientWidth,
            width: e.clientWidth || t.clientWidth,
            bottom: e.clientHeight || t.clientHeight,
            height: e.clientHeight || t.clientHeight
        }), this._expandRectByRootMargin(i)
    }, Qm.prototype._expandRectByRootMargin = function (i) {
        var e = this._rootMarginValues.map(function (e, t) {
            return "px" == e.unit ? e.value : e.value * (t % 2 ? i.width : i.height) / 100
        }), t = {top: i.top - e[0], right: i.right + e[1], bottom: i.bottom + e[2], left: i.left - e[3]};
        return t.width = t.right - t.left, t.height = t.bottom - t.top, t
    }, Qm.prototype._hasCrossedThreshold = function (e, t) {
        var i = e && e.isIntersecting ? e.intersectionRatio || 0 : -1,
            n = t.isIntersecting ? t.intersectionRatio || 0 : -1;
        if (i !== n) for (var r = 0; r < this.thresholds.length; r++) {
            var o = this.thresholds[r];
            if (o == i || o == n || o < i != o < n) return !0
        }
    }, Qm.prototype._rootIsInDom = function () {
        return !this.root || $m(Lm, this.root)
    }, Qm.prototype._rootContainsTarget = function (e) {
        return $m(this.root || Lm, e) && (!this.root || this.root.ownerDocument == e.ownerDocument)
    }, Qm.prototype._registerInstance = function () {
        Mm.indexOf(this) < 0 && Mm.push(this)
    }, Qm.prototype._unregisterInstance = function () {
        var e = Mm.indexOf(this);
        -1 != e && Mm.splice(e, 1)
    }, window.IntersectionObserver = Qm, window.IntersectionObserverEntry = Pm));
    var interval = null, topValue = 0;

    function initWebStay() {
        function t() {
            return !0 === isRoot ? document.documentElement.scrollTop || document.body.scrollTop : rootEle.scrollTop || 0
        }

        function i() {
            var e = t();
            topValue === e && (clearTimeout(interval), interval = null, window.AnalysysAgent && window.AnalysysAgent.freeApi ? window.AnalysysAgent.freeApi("$webstay") : setTimeout(function () {
                i()
            }, 100))
        }

        Util$1.addEvent(rootEle, "scroll", function () {
            clearTimeout(interval), interval = setTimeout(i, 1e3), topValue = t()
        })
    }

    function getChildEle(e) {
        for (var t = (e || document.body).childNodes, i = document.body, n = 0; n < t.length; n++) if (1 === t[n].nodeType) {
            if (!0 === hasScrollbar(t[n])) return isRoot = !1, t[n];
            i = getChildEle(t[n])
        }
        return i
    }

    function hasScrollbar(e) {
        var t = 0, i = document.body.scrollHeight;
        return (e ? (t = e.scrollHeight, e.clientHeight) : (t = document.body.scrollHeight, window.innerHeight || document.documentElement.clientHeight)) < t && i < t
    }

    var rootEle = null, isRoot = !0;

    function getRootEle(e) {
        var t, i, n = null;
        !0 === e.autoHeatmap && !0 === e.autoWebstay && !1 === e.isHybrid && ((t = e.webstayRootEle) && ("String" === Util$1.paramType(t) ? 0 < (i = Util$1.selectorAllEleList(t)).length && (n = i[0]) : "Function" === Util$1.paramType(t) ? n = t.call(t) || null : "object" == typeof t && 1 === t.nodeType && (n = t)), (rootEle = n ? (isRoot = !1, n) : getChildEle()) !== document.body && rootEle || (rootEle = window), setRootEle(rootEle), initWebStay())
    }

    function autoWebstayInit(e) {
        return -1 < window.location.href.indexOf("visual=true") || -1 < window.location.href.indexOf("arkheatmap=true") || (!1 === isElmentReady() ? setTimeout(function () {
            autoWebstayInit(e)
        }, 300) : getRootEle(e)), e
    }

    var lifecycle$2 = {AnalysysAgent: {init: autoWebstayInit}},
        webstay = {__proto__: null, fieldRules: fieldRules$2, fieldTemplate: fieldTemplate$2, lifecycle: lifecycle$2},
        fieldRules$3 = {
            autoHeatmap: {check: {value: ["isBoolean"]}},
            xcontext: {
                $page_width: {valueType: 0, value: getPageWidth},
                $page_height: {valueType: 0, value: getPageHeight},
                $click_x: {valueType: 0, value: getClickX},
                $click_y: {valueType: 0, value: getClickY},
                $element_path: {valueType: 0, value: getElementPath},
                $url_path: {valueType: 0, value: getUrlPath},
                $element_x: {valueType: 0, value: getElementX},
                $element_y: {valueType: 0, value: getElementY},
                $element_type: {valueType: 0, value: getElementType},
                $element_clickable: {valueType: 0, value: getElementClickable},
                $element_content: {valueType: 0, value: getEleContent},
                $device_type: {valueType: 0, value: getDeviceType$1},
                $element_id: {valueType: 0, value: getElementId},
                $element_name: {valueType: 0, value: getElementName},
                $element_target_url: {valueType: 0, value: getElementTargetUrl},
                $element_class_name: {valueType: 0, value: getElementClassName}
            }
        },
        fieldTemplate$3 = {$web_click: {xcontext: ["$page_width", "$page_height", "$click_x", "$click_y", "$element_path", "$url_path", "$url", "$title", "$session_id", "$device_type", "$session_id", "$is_time_calibrated", "$element_x", "$element_y", "$element_type", "$element_clickable", "$element_content", "$is_first_day", "$element_id", "$element_name", "$element_target_url", "$element_class_name"]}},
        heatmapConfig = {};

    function loadHeatmapSDK() {
        document.body && document.getElementsByTagName("body")[0] ? (Util$1.addScript("AnalysysAgent_JS_SDK_HEATMAP", heatmapConfig.SDKFileDirectory), window.ARK_HEATMAP = {config: heatmapConfig}) : setTimeout(loadHeatmapSDK, 50)
    }

    function addClickEvent(e) {
        var t = e || window.event;
        t.touches && 0 < t.touches.length && (t = t.touches[0]);
        var i, n, r, o, a, s, l = t.target || t.srcElement;
        Util$1.checkTypeList(heatmapConfig.heatMapBlackList, l) || heatmapConfig.heatMapWhiteList && !Util$1.checkTypeList(heatmapConfig.heatMapWhiteList, l) || (i = document.documentElement.scrollLeft || document.body.scrollLeft, n = document.documentElement.scrollTop || document.body.scrollTop, r = t.pageX || t.clientX + i, o = t.pageY || t.clientY + n, elePostion.click_x = r, elePostion.click_y = o, elePostion.clickEle = elePostion.ele = l, getParentClickableElement(), a = eleScroll(elePostion.ele), s = eleOffset$1(elePostion.ele), elePostion.elementX = r - (s.left - a.scrollLeft), elePostion.elementY = o - (s.top - a.scrollTop), !r || !o || r <= 0 || o <= 0 || (window.AnalysysAgent && window.AnalysysAgent.freeApi ? window.AnalysysAgent.freeApi("$web_click") : setTimeout(function () {
            addClickEvent(e)
        }, 100)))
    }

    function initHeatmap() {
        "desktop" == Util$1.deviceType() ? Util$1.addEvent(document, "click", addClickEvent) : Util$1.addEvent(document, "touchstart", addClickEvent)
    }

    function heatmapInit(e) {
        return heatmapConfig = e, -1 < window.location.href.indexOf("arkheatmap=true") || -1 < window.name.indexOf("arkheatmap=true") ? ("" === window.name && (window.name = window.location.href), loadHeatmapSDK()) : !0 === e.autoHeatmap && !1 === e.isHybrid && initHeatmap(), e
    }

    for (var lifecycle$3 = {AnalysysAgent: {init: heatmapInit}}, heatmap = {
        __proto__: null,
        fieldRules: fieldRules$3,
        fieldTemplate: fieldTemplate$3,
        lifecycle: lifecycle$3
    }, fieldRules$4 = {
        xcontext: {
            $user_agent: {
                valueType: 1,
                value: window.navigator.userAgent.replace(/"/g, '\\"')
            }
        }
    }, temp = {}, event = ["$startup", "$track", "$pageview", "$webstay", "$web_click", "$user_click"], common = {xcontext: ["$user_agent"]}, i = 0; i < event.length; i++) temp[event[i]] = common;
    var ua = {__proto__: null, fieldRules: fieldRules$4, fieldTemplate: temp}, fieldRules$5 = {
            xcontext: {
                $page_width: {valueType: 0, value: getPageWidth},
                $page_height: {valueType: 0, value: getPageHeight},
                $element_path: {valueType: 0, value: getElementPath},
                $url_path: {valueType: 0, value: getUrlPath},
                $element_type: {valueType: 0, value: getElementType},
                $element_clickable: {valueType: 0, value: getElementClickable},
                $element_content: {valueType: 0, value: getEleContent},
                $device_type: {valueType: 0, value: getDeviceType$1},
                $element_id: {valueType: 0, value: getElementId},
                $element_name: {valueType: 0, value: getElementName},
                $element_target_url: {valueType: 0, value: getElementTargetUrl},
                $element_class_name: {valueType: 0, value: getElementClassName}
            }
        },
        fieldTemplate$4 = {$user_click: {xcontext: ["$url_path", "$url", "$title", "$is_first_day", "$session_id", "$is_time_calibrated", "$device_type", "$element_type", "$element_path", "$element_content", "$element_id", "$element_name", "$element_target_url", "$element_class_name"]}},
        userClickConfig = {};

    function addClickEvent$1(e) {
        var t;
        (t = e || window.event).touches && 0 < t.touches.length && (t = t.touches[0]);
        var i = t.target || t.srcElement;
        if (!(Util$1.checkTypeList(userClickConfig.autoClickBlackList, i) || userClickConfig.autoClickWhiteList && !Util$1.checkTypeList(userClickConfig.autoClickWhiteList, i)) && (elePostion.ele = i, getParentClickableElement(), 1 === getElementClickable())) {
            var n = userClickConfig.user_click_property, r = {};
            if ("Object" === Util$1.paramType(n)) {
                for (var o in n) "Function" === Util$1.paramType(n[o]) && (n[o] = n[o].call(n[o], i));
                r = n
            } else "Function" === Util$1.paramType(n) && (r = n.call(n, i));
            var a = elePostion.ele.getAttribute("data-ark-click") || {};
            if ("String" === Util$1.paramType(a)) try {
                a = JSON.parse(a)
            } catch (t) {
            }
            "Object" !== Util$1.paramType(a) && (a = {}), "Object" === Util$1.paramType(r) && (a = Util$1.objMerge(r, a)), window.AnalysysAgent.freeApi("$user_click", a)
        }
    }

    function addListenerUserClick() {
        "desktop" === Util$1.deviceType() ? Util$1.addEvent(document, "mousedown", addClickEvent$1) : Util$1.addEvent(document, "touchstart", addClickEvent$1)
    }

    function userClickInit(e) {
        return !0 === (userClickConfig = e).autoTrack && addListenerUserClick(), e
    }

    for (var lifecycle$4 = {AnalysysAgent: {init: userClickInit}}, userClick = {
        __proto__: null,
        fieldRules: fieldRules$5,
        fieldTemplate: fieldTemplate$4,
        lifecycle: lifecycle$4
    }, plugList = [visitor, webstay, heatmap, ua, userClick], fieldRules$6 = fieldRules || {}, fieldTemplate$5 = fieldTemplate || {}, lifecycle$5 = lifecycle || {}, i$1 = 0; i$1 < plugList.length; i$1++) plugList[i$1].fieldRules && (fieldRules$6 = Util$1.objMerge(fieldRules$6, plugList[i$1].fieldRules)), plugList[i$1].fieldTemplate && (fieldTemplate$5 = Util$1.objMerge(fieldTemplate$5, plugList[i$1].fieldTemplate)), plugList[i$1].lifecycle && (lifecycle$5 = Util$1.fnMerge(lifecycle$5, plugList[i$1].lifecycle));
    for (var eventTemp = {}, commonTemp = {}, baseTemp = fieldTemplate$5.base, outerTemp = baseTemp.outer, i$2 = 0, keyTemp; i$2 < outerTemp.length; i$2++) baseTemp[outerTemp[i$2]] ? commonTemp[outerTemp[i$2]] = Util$1.toObj(baseTemp[outerTemp[i$2]]) : commonTemp[outerTemp[i$2]] = "";
    for (var key in fieldTemplate$5) {
        "base" !== key && (keyTemp = Util$1.toDeepObj(fieldTemplate$5[key]), eventTemp[key + "base"] = keyTemp, eventTemp[key] = Util$1.objMerge(commonTemp, keyTemp))
    }

    function temp$1(e) {
        return eventTemp[e] || eventTemp.commonTemp
    }

    eventTemp.commonTemp = commonTemp;
    var CheckField = function CheckField() {
    };
    CheckField.prototype = Util$1, CheckField.prototype.isString = function (e) {
        return baseConfig.status.errorCode = "60001", "String" === Util$1.paramType(e)
    }, CheckField.prototype.isNumber = function (e) {
        return baseConfig.status.errorCode = "60002", "Number" === Util$1.paramType(e)
    }, CheckField.prototype.isBoolean = function (e) {
        return baseConfig.status.errorCode = "60003", "Boolean" === Util$1.paramType(e)
    }, CheckField.prototype.isObject = function (e) {
        return "Object" === this.paramType(e)
    }, CheckField.prototype.lengthRule = function (e, t, i) {
        this.isNumber(i) || (i = Infinity);
        var n = !0;
        return this.isNumber(t) && e.length && e.length > t && e.length < i + 1 || (n = !(baseConfig.status.errorCode = "60005")), n
    }, CheckField.prototype.nimLength = function (e) {
        return this.lengthRule(e, 0)
    }, CheckField.prototype.length99 = function (e) {
        var t = this.lengthRule(e, 0, 99);
        return t || (baseConfig.status.errorCode = "600010"), t
    }, CheckField.prototype.length125 = function (e) {
        var t = this.lengthRule(e, 0, 125);
        return t || (baseConfig.status.errorCode = "60009"), t
    }, CheckField.prototype.length255 = function (e) {
        if (!(e || this.isString(e) || this.isNumber(e) || this.isBoolean(e))) return !(baseConfig.status.errorCode = "60005");
        "String" !== this.paramType(e) && (e = e.toString());
        var t = this.lengthRule(e, 0, 255);
        return t || (baseConfig.status.errorCode = "600019"), t
    }, CheckField.prototype.keyLength255 = function (e) {
        var t = this.length255(e);
        return t || (baseConfig.status.errorCode = "600017"), t
    }, CheckField.prototype.isUrl = function (e) {
        var t = e;
        return !0 === new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(t) || !(baseConfig.status.errorCode = "60006")
    }, CheckField.prototype.isDebug = function (e) {
        return !(!this.isNumber(e) || 0 !== e && 1 !== e && 2 !== e)
    }, CheckField.prototype.notObject = function (e) {
        var t = !this.isObject(e);
        return t || (baseConfig.status.errorCode = "600020"), t
    }, CheckField.prototype.notSpecialCharacters = function (e) {
        return !(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]", "gi").test(e) || !/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e)) || !(baseConfig.status.errorCode = "600011")
    }, CheckField.prototype.isArrayString = function (e) {
        if ("Array" === this.paramType(e)) for (var t = 0; t < e.length; t++) {
            if ("String" !== this.paramType(e[t])) return !(baseConfig.status.errorCode = "600013");
            if (!this.length255(e[t])) return e[t] && 500 < e[t].length && (e[t] = Util$1.stringSlice(e[t], 499) + "$"), baseConfig.status.value = e[t], !1
        }
        return !0
    }, CheckField.prototype.keywords = function (e) {
        return !(-1 < baseConfig.keywords.indexOf(e)) || !(baseConfig.status.errorCode = "600012")
    };
    var checkRule = new CheckField;

    function check(e, t) {
        for (var i = 0; i < t.length; i++) {
            if (!checkRule[t[i]](e)) return !1
        }
        return !0
    }

    function checkFields(e, t, i) {
        var n = i.check, r = !0;
        if (!n) return r;
        var o = n.key, a = n.value || fieldRules$6.xcontextCommonRule.value;
        return o && (baseConfig.status.code = 200, r = check(e, o), baseConfig.status.key = e, r || (baseConfig.status.code = 400, errorLog())), a && (baseConfig.status.code = 200, r = check(t, a), "Array" !== Util$1.paramType(t) && (baseConfig.status.value = t), r || (baseConfig.status.code = 400, errorLog())), r
    }

    function resetCode() {
        baseConfig.status = {
            code: 200,
            FnName: baseConfig.status.FnName,
            key: "",
            value: "",
            errorCode: "",
            successCode: ""
        }
    }

    function fillField(e, t) {
        var i = t || fieldRules$6, n = {};
        for (var r in e) {
            var o, a, s = e[r], l = i[r];
            l && (o = "", "Object" === Util$1.paramType(s) ? (a = fillField(s, l), n[r] = a) : Util$1.objHasKay(l, "valueType") && (0 === l.valueType && (o = l.value(), "String" === Util$1.paramType(o) && 500 < o.length ? n[r] = Util$1.stringSlice(o, 499) + "$" : n[r] = o), 1 === l.valueType && (o = l.value, "String" === Util$1.paramType(o) && 500 < o.length ? n[r] = Util$1.stringSlice(o, 499) + "$" : n[r] = o)))
        }
        return n
    }

    function clearCache(e) {
        if (!(e = e || !1)) {
            var t = baseConfig.base;
            for (var i in t) {
                "Object" !== Util$1.paramType(t[i]) && ("$debug" !== i && "appid" !== i && "uploadURL" !== i || (Storage$1.getLocal("ANS" + i.toUpperCase()) !== t[i] && (e = !0), e && Storage$1.setLocal("ANS" + i.toUpperCase(), t[i])))
            }
        }
        return e && (removeAliasId(), removeIdentifyId(), Storage$1.removeLocal("ARKSUPER"), Storage$1.removeSession("STARTUP"), Storage$1.setLocal("FRISTDAY", Util$1.format(new Date, "yyyyMMdd")), Storage$1.setLocal("FRISTIME", !0), Storage$1.removeLocal("POSTDATA"), Storage$1.removeLocal("ANSSERVERTIME"), Storage$1.removeLocal("ARKFRISTPROFILE")), e
    }

    function isStartUp() {
        var e, t, i, n, r = Storage$1.getSession("STARTUP") || !1, o = Storage$1.getCookie("ARK_STARTUP");
        return "" !== document.referrer && o && !0 === baseConfig.base.cross_subdomain && (t = (e = JSON.parse(Util$1.decode(decodeURIComponent(o)))).STARTUP, i = e.STARTUPTIME, Storage$1.setSession("STARTUP", t), Storage$1.setSession("STARTUPTIME", i), r = Storage$1.getSession("STARTUP") || !1), !1 === r && (n = Util$1.format(new Date, "yyyy-MM-dd hh:mm:ss.SSS"), Storage$1.setSession("STARTUP", !0), Storage$1.setSession("STARTUPTIME", n), sessionId.setId(), !0 === baseConfig.base.cross_subdomain && Storage$1.setCookie("ARK_STARTUP", encodeURIComponent(Util$1.encode(JSON.stringify({
            STARTUP: !0,
            STARTUPTIME: n
        }))), "session")), r
    }

    function checkBase() {
        for (var e in baseConfig.base) {
            resetCode(), baseConfig.status.key = e;
            var t = fieldRules$6[e];
            if ("$debug" === e && (t = fieldRules$6.xcontext[e]), "$lib_version" === e && (t = fieldRules$6.xcontext[e]), t && !checkFields(e, baseConfig.base[e], t)) return void (baseConfig.base[e] = "");
            successLog()
        }
        return 1
    }

    function checkPrivate(e, t, i) {
        resetCode();
        var n = fieldRules$6[t] || fieldRules$6.xcontextCommonRule;
        if ("Object" !== Util$1.paramType(e) || !0 === i) {
            var r = n.check.key, o = check(Util$1.trim(e), r);
            if (baseConfig.status.key = e, !o) return errorLog(), !1
        } else for (var a in e) {
            checkFields(a, e[a], n) || "600019" === baseConfig.status.errorCode && "String" === Util$1.paramType(e[a]) && 500 < e[a].length && (e[a] = Util$1.stringSlice(e[a], 499) + "$")
        }
        return !0
    }

    var postStatus = !0, sendType = "img",
        rxDangerous = /[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

    function delRx(e) {
        if ("Array" === Util$1.paramType(e)) for (var t = 0; t < e.length; t++) e[t] = delRx(e[t]);
        if ("Object" === Util$1.paramType(e)) for (var i in e) {
            var n = e[i];
            e[i] = delRx(n)
        }
        if ("String" !== Util$1.paramType(e)) return e;
        var r = e.replace(rxDangerous, function (e) {
            return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
        });
        return "Sting" !== Util$1.paramType(r) ? e : r
    }

    function sendPost(e, t) {
        var i, n, a, r, o, s;
        Util$1.GetUrlParam("visual") && -1 < Util$1.GetUrlParam("visual").indexOf("true") || ("img" !== sendType && (postStatus = !1), i = e, "Array" === Util$1.paramType(e) && (e = delRx(e), i = JSON.stringify(e)), window.AnalysysModal && "function" == typeof window.AnalysysModal && window.AnalysysModal(e), n = function n() {
            postStatus = !0, baseConfig.status.errorCode = "60008", errorLog(), "Function" === Util$1.paramType(t) && t.call(t)
        }, a = function a(e) {
            postStatus = !0;
            var t = Storage$1.getLocal("POSTDATA") || [];
            if (Util$1.isEmptyObject(t) && (t = [], Storage$1.removeLocal("POSTDATA")), 0 !== t.length) {
                for (var i = [], n = 0; n < t.length; n++) {
                    for (var r = !1, o = 0; o < e.length; o++) e[o].xwhen !== t[n].xwhen && e[o].xwhen && t[n].xwhen || (r = !0);
                    !1 !== r || "Object" !== Util$1.paramType(t[n]) || Util$1.isEmptyObject(t[n]) || i.push(t[n])
                }
                0 < i.length && "img" !== sendType ? (Storage$1.setLocal("POSTDATA", i), sendPost(i)) : Storage$1.removeLocal("POSTDATA")
            } else Storage$1.removeLocal("POSTDATA")
        }, o = e, r = function (e) {
            200 === e.code || 400 === e.code || 4200 === e.code ? (baseConfig.status.successCode = "20001", successLog(), a(o), "Function" === Util$1.paramType(t) && t.call(t)) : n()
        }, s = {
            url: baseConfig.base.uploadURL + "up?appid=" + baseConfig.base.appid,
            data: i,
            success: r,
            error: n
        }, successLog("Send message to server: " + baseConfig.base.uploadURL + "up?appid=" + baseConfig.base.appid + "\ndata:" + i), lifecycle$5.upload && lifecycle$5.upload.init ? s = lifecycle$5.upload.init(s) : window.AnalysysModule && "Object" === Util$1.paramType(window.AnalysysModule) && "Function" === Util$1.paramType(window.AnalysysModule.uploadData) && (window.AnalysysModule.encryptInit(baseConfig.base), s = window.AnalysysModule.uploadData(s)), "img" !== sendType ? "post" === sendType || "send" !== sendType ? (new ajax).post(s) : snedGet(s, "send") : snedGet(s, "img"))
    }

    function setValidKey(e) {
        var t = {data: e.data, send_type: ""}, i = [];
        for (var n in t) i.push(n + "=" + encodeURIComponent(t[n]));
        var r = (r = -1 < e.url.indexOf("?") ? e.url + "&" + i.join("&") : e.url + "?" + i.join("&")).replace(baseConfig.base.uploadURL, "/"),
            o = Util$1.MD5(r, 32).split(""), a = o[2] + "" + o[0] + o[4];
        return t.send_type = a, t
    }

    function snedGet(e, t) {
        if ("send" === t && navigator.sendBeacon) navigator.sendBeacon(e.url, e.data) && e.success({code: 200}); else if ("send" !== t || navigator.sendBeacon || (t = "img"), e.data = Util$1.encode(e.data), e.data = setValidKey(e), "img" === t) {
            var i = [];
            for (var n in e.data) i.push(n + "=" + encodeURIComponent(e.data[n]));
            var r = -1 < e.url.indexOf("?") ? e.url + "&" + i.join("&") : e.url + "?" + i.join("&"),
                o = document.createElement("img"), a = null;
            o.width = 1, o.height = 1, o.onerror = o.onload = function () {
                clearTimeout(a), e.success({code: 200}), this.src = "", this.onload = null, this.onerror = null, this.onabort = null
            }, o.onabort = function () {
                this.src = "", this.onload = null, this.onerror = null, this.onabort = null, e.error()
            }, "Number" === Util$1.paramType(baseConfig.base.sendDataTimeout) && (a = setTimeout(function () {
                o.onabort()
            }, baseConfig.base.sendDataTimeout)), o.src = r
        }
    }

    function checkLogBaseJson(e) {
        if ("Object" === Util$1.paramType(e) && !Util$1.isEmptyObject(e)) {
            for (var t = !0, i = 0; i < baseConfig.baseJson.length; i++) {
                var n = baseConfig.baseJson[i];
                "xwhat" !== n && (!e[n] || "Object" === Util$1.paramType(e[n]) && Util$1.isEmptyObject(e[n])) && (t = !1)
            }
            return t
        }
    }

    function checkSavaData(e) {
        var t = [];
        if ("Array" === Util$1.paramType(e) && 0 < e.length) for (var i = 0; i < e.length; i++) {
            var n = checkSavaData(e[i]);
            0 < n.length && t.push.apply(t, n)
        }
        return "Object" === Util$1.paramType(e) && !Util$1.isEmptyObject(e) && checkLogBaseJson(e) && t.push(e), t
    }

    function upLog(t, i) {
        try {
            baseConfig.base.sendType && (sendType = baseConfig.base.sendType), "/" !== baseConfig.base.uploadURL.charAt(baseConfig.base.uploadURL.length - 1) && (baseConfig.base.uploadURL += "/");
            var n, r = [];
            if ("img" === sendType ? r = checkSavaData(t) : (0 === (n = checkSavaData(n = Storage$1.getLocal("POSTDATA") || [])).length && Storage$1.removeLocal("POSTDATA"), (r = n).length < 500 ? r.push.apply(r, checkSavaData(t)) : r = checkSavaData(t), Storage$1.setLocal("POSTDATA", r)), !1 === postStatus && "img" !== sendType) return void ("Function" === Util$1.paramType(i) && i.call(i));
            if (0 < r.length) if ("img" === sendType) for (var o = 0; o < r.length; o++) 0 === o ? sendPost([r[o]], i) : sendPost([r[o]]); else sendPost(r, i)
        } catch (e) {
        }
    }

    function loadIframeUrl(e, t) {
        var i;
        document.body ? ((i = document.createElement("iframe")).setAttribute("src", e), i.setAttribute("id", "AnalysysAgentIframe"), i.setAttribute("style", "display:none;"), document.body.appendChild(i), i.parentNode.removeChild(i)) : setTimeout(function () {
            loadIframeUrl(e)
        }, 200)
    }

    function transporter(e, t, i, n) {
        var r = {functionName: e, functionParams: t};
        "String" === Util$1.paramType(i) ? r.callbackFunName = i : "Function" === Util$1.paramType(i) && (n = i);
        var o = JSON.stringify(r);
        successLog("Send message to app: \ndata:" + o), window.AnalysysModule && !0 === window.AnalysysModule.moduleStatus ? window.AnalysysModule.upData(r) : window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.AnalysysAgent ? postMessage(r) : window.AnalysysAgentHybrid && window.AnalysysAgentHybrid.analysysHybridCallNative ? callNative(o) : loadIframeUrl("analysysagent:" + o), "Function" === Util$1.paramType(n) && n.call(n)
    }

    function backParamsArray() {
        for (var e = arguments, t = [], i = null, n = 0; n < e.length; n++) if (e[n] !== undefined) {
            if ("Object" === Util$1.paramType(e[n])) for (var r in e[n]) "Function" === Util$1.paramType(e[n][r]) && (e[n][r] = e[n][r].call(e[n][r]));
            "Function" === Util$1.paramType(e[n]) ? i = e[n] : t.push(e[n])
        }
        return {argArray: t, callback: i}
    }

    function postMessage(e) {
        window.webkit.messageHandlers.AnalysysAgent.postMessage(e)
    }

    function callNative(e) {
        window.AnalysysAgentHybrid.analysysHybridCallNative(e)
    }

    var pageCloseStatus = !1, pageUrl = window.location.href;

    function pageView(e, t, i) {
        upLog(pageViewLog(e, t, i), i)
    }

    function pageViewLog(e, t, i) {
        var n = e, r = t, o = i;
        window.AnalysysModule && window.AnalysysModule.pageClose && (!0 === pageCloseStatus ? window.AnalysysModule.pageClose.pageEndTrack() : pageCloseStatus = !0, "String" === Util$1.paramType(n) ? window.AnalysysModule.pageClose.createTime(+new Date, n) : window.AnalysysModule.pageClose.createTime(+new Date)), baseConfig.status.FnName = "$pageview", resetCode();
        var a = {};
        "String" === Util$1.paramType(n) ? checkPrivate(a = {$title: n}) : "Object" === Util$1.paramType(n) ? ("Function" === Util$1.paramType(r) && (o = r), r = n, n = "") : "Function" === Util$1.paramType(n) && (o = n, n = r = ""), "Function" === Util$1.paramType(r) && (o = r, r = "");
        var s = {};
        if ("Object" === Util$1.paramType(r)) {
            for (var l in r) "Function" === Util$1.paramType(r[l]) && (r[l] = r[l].call(r[l]));
            !1 === baseConfig.base.isHybrid && checkPrivate(r), s = {xcontext: r || {}}
        }
        var c = Storage$1.getLocal("ARKSUPER") || {};
        !0 === baseConfig.base.isHybrid && (c = {});
        var u = Util$1.objMerge({xcontext: c}, s), u = Util$1.objMerge(u, {xcontext: a}), p = temp$1("$pageview"),
            d = Util$1.delEmpty(fillField(p));
        if (!0 !== baseConfig.base.isHybrid) return setReferrer(pageUrl), Util$1.objMerge(d, u);
        p = temp$1("$pageviewbase"), d = Util$1.delEmpty(fillField(p));
        var g = Util$1.objMerge(d, u),
            f = backParamsArray(n || "", g = Util$1.delNotHybrid(Util$1.delEmpty(g.xcontext)), o);
        return transporter("pageView", f.argArray, f.callback), void setReferrer(pageUrl)
    }

    function hashPageView() {
        Util$1.changeHash(function () {
            var e;
            pageUrl !== window.location.href && (pageUrl = window.location.href, e = !1, (baseConfig.base.pageViewWhiteList && Util$1.checkTypeList(baseConfig.base.pageViewWhiteList) || !Util$1.checkTypeList(baseConfig.base.pageViewBlackList)) && (e = !0), !0 === e && pageView())
        })
    }

    function track(e, t, i) {
        baseConfig.status.FnName = e || "$track", resetCode(), checkPrivate(e, "$track", !0), baseConfig.status.FnName = e;
        var n = {};
        if ("Function" === Util$1.paramType(t) && (i = t, t = {}), "Object" === Util$1.paramType(t)) {
            for (var r in t) "Function" === Util$1.paramType(t[r]) && (t[r] = t[r].call(t[r]));
            checkPrivate(t), n = {xcontext: t}
        }
        var o, a, s, l, c = Storage$1.getLocal("ARKSUPER") || {}, u = Util$1.objMerge({xcontext: c}, n);
        !0 !== baseConfig.base.isHybrid ? ((o = fillField(temp$1("$track"))).xcontext = Util$1.delEmpty(o.xcontext), upLog(Util$1.objMerge(o, u), i)) : (a = fillField(temp$1("$trackbase")), a = Util$1.delEmpty(a), s = Util$1.objMerge(a, u), transporter("track", (l = backParamsArray(e, s = Util$1.delNotHybrid(Util$1.delEmpty(s.xcontext)), i)).argArray, l.callback))
    }

    function freeApi(e, t) {
        baseConfig.status.FnName = e, resetCode();
        var i, n, r, o = temp$1(e);
        o && (!0 !== baseConfig.base.isHybrid ? (i = fillField(o), n = Storage$1.getLocal("ARKSUPER") || {}, "Object" === Util$1.paramType(t) && (n = Util$1.objMerge(n, t)), i = Util$1.objMerge(i, {xcontext: n}), upLog(Util$1.delEmpty(i))) : (r = fillField(temp$1(e + "base")), transporter("track", backParamsArray(e, Util$1.delNotHybrid(Util$1.delEmpty(r.xcontext))).argArray)))
    }

    function getPresetProperties(e) {
        if (baseConfig.status.FnName = "$getPresetProperties", resetCode(), !0 === baseConfig.base.isHybrid) {
            var t = "AnsCallback" + +new Date;
            return window[t] = function () {
                e.apply(e, arguments), delete window[t]
            }, void transporter("getPresetProperties", [], t)
        }
        var i = fillField(temp$1("$getPresetProperties"));
        i.xcontext.$first_visit_time = Storage$1.getLocal("ARKFRISTPROFILE") || "", delete i.xcontext.$is_login;
        var n = Util$1.delEmpty(i.xcontext);
        return "Function" === Util$1.paramType(e) && e.call(e, n), n
    }

    function alias(e, t) {
        if (baseConfig.status.FnName = "$alias", resetCode(), e === Storage$1.getLocal("ARK_LOGINID")) return baseConfig.status.successCode = "20013", successLog(), "Function" === Util$1.paramType(t) && t.call(t), !1;
        var i, n, r, o, a, s;
        !0 !== baseConfig.base.isHybrid ? checkPrivate(e, "$alias", !0) ? (Storage$1.setLocal("ARK_LOGINID", e), i = fillField(temp$1("$alias")), upLog(Util$1.delEmpty(i), t), !0 === baseConfig.base.autoProfile && (n = fillField(temp$1(baseConfig.status.FnName = "$profile_set_once")), o = {
            $first_visit_time: r = Storage$1.getLocal("ARKFRISTPROFILE") || Util$1.format(new Date, "yyyy-MM-dd hh:mm:ss.SSS"),
            $first_visit_language: (navigator.language || navigator.browserLanguage).toLowerCase()
        }, a = Util$1.objMerge(n, {xcontext: o}), upLog(Util$1.delEmpty(a)), Storage$1.setLocal("ARKFRISTPROFILE", r))) : "Function" === Util$1.paramType(t) && t.call(t) : transporter("alias", (s = backParamsArray(e, "", t)).argArray, s.callback)
    }

    function identify(e, t, i) {
        var n;
        baseConfig.status.FnName = "$identify", resetCode(), !0 !== baseConfig.base.isHybrid ? checkPrivate(e, "$alias", !0) && ("Boolean" === Util$1.paramType(t) && !0 === t ? Storage$1.setLocal("ARK_TRACK_LOGIN", !0) : "Function" === Util$1.paramType(t) && (i = t), Storage$1.setLocal("ARK_TRACKID", e), Storage$1.setCookie("ARK_ID", e), baseConfig.status.successCode = "20002", baseConfig.status.value = e, successLog(), "Function" === Util$1.paramType(i) && i.call(i), window.AnalysysModal && "function" == typeof window.AnalysysModal && window.AnalysysModal([{
            xwhat: "$identify",
            xwho: e
        }])) : transporter("identify", (n = backParamsArray(e, i)).argArray, n.callback)
    }

    function profileSet(e, t, i) {
        baseConfig.status.FnName = "$profile_set", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$profile_set"), n = temp$1("$profile_set"), r = Util$1.delEmpty(fillField(n)), upLog(Util$1.objMerge(r, {xcontext: a}), i)) : transporter("profileSet", (o = backParamsArray(e, t, i)).argArray, o.callback)
    }

    function profileSetOnce(e, t, i) {
        baseConfig.status.FnName = "$profile_set_once", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$profile_set_once"), n = temp$1("$profile_set_once"), r = Util$1.delEmpty(fillField(n)), upLog(Util$1.objMerge(r, {xcontext: a}), i)) : transporter("profileSetOnce", (o = backParamsArray(a, i)).argArray, o.callback)
    }

    function profileIncrement(e, t, i) {
        baseConfig.status.FnName = "$profile_increment", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$profile_increment"), n = temp$1("$profile_increment"), r = Util$1.delEmpty(fillField(n)), upLog(Util$1.objMerge(r, {xcontext: a}), i)) : transporter("profileIncrement", (o = backParamsArray(e, t, i)).argArray, o.callback)
    }

    function profileAppend(e, t, i) {
        baseConfig.status.FnName = "$profile_append", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$profile_append"), n = temp$1("$profile_append"), r = Util$1.delEmpty(fillField(n)), upLog(Util$1.objMerge(r, {xcontext: a}), i)) : transporter("profileAppend", (o = backParamsArray(e, t, i)).argArray, o.callback)
    }

    function profileUnset(e, t) {
        baseConfig.status.FnName = "$profile_unset", resetCode(), "Function" === Util$1.paramType(e) && (e = e.call(e)), checkPrivate(e, "$profile_unset", e);
        var i, n, r = Util$1.toObj(e, "");
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(r, "$profile_unset"), i = fillField(temp$1("$profile_unset")), upLog(Util$1.objMerge(i, {xcontext: r}), t)) : transporter("profileUnset", (n = backParamsArray(e, t)).argArray, n.callback)
    }

    function profileDelete(e) {
        baseConfig.status.FnName = "$profile_delete", resetCode(), !0 !== baseConfig.base.isHybrid ? upLog(fillField(temp$1("$profile_delete")), e) : transporter("profileDelete", [], e)
    }

    function registerSuperProperty(e, t, i) {
        baseConfig.status.FnName = "$registerSuperProperty", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$registerSuperProperty"), n = Storage$1.getLocal("ARKSUPER") || {}, r = Util$1.objMerge(n, a), Storage$1.setLocal("ARKSUPER", r), baseConfig.status.successCode = "20002", baseConfig.status.value = JSON.stringify(a), successLog(), "Function" === Util$1.paramType(i) && i.call(i)) : transporter("registerSuperProperty", (o = backParamsArray(e, t, i)).argArray, o.callback)
    }

    function registerSuperProperties(e, t, i) {
        baseConfig.status.FnName = "$registerSuperProperties", resetCode(), "Object" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) ? (i = t, t = "") : "String" === Util$1.paramType(e) && "Function" === Util$1.paramType(t) && (t = t.call(t));
        var n, r, o, a = Util$1.toObj(e, t);
        for (var s in a) "Function" === Util$1.paramType(a[s]) && (a[s] = a[s].call(a[s]));
        !0 !== baseConfig.base.isHybrid ? (checkPrivate(a, "$registerSuperProperties"), n = Storage$1.getLocal("ARKSUPER") || {}, r = Util$1.objMerge(n, a), Storage$1.setLocal("ARKSUPER", r), baseConfig.status.successCode = "20002", baseConfig.status.value = JSON.stringify(a), successLog(), "Function" === Util$1.paramType(i) && i.call(i)) : transporter("registerSuperProperties", (o = backParamsArray(e, t, i)).argArray, o.callback)
    }

    function getSuperProperty(e, t) {
        if (baseConfig.status.FnName = "$getSuperProperty", resetCode(), !0 === baseConfig.base.isHybrid) {
            var i = backParamsArray(e), n = "AnsCallback" + +new Date;
            return window[n] = function () {
                t.apply(t, arguments), delete window[n]
            }, void transporter("getSuperProperty", i.argArray, n)
        }
        checkPrivate(e, "$getSuperProperty", !0);
        var r = Storage$1.getLocal("ARKSUPER") || {}, o = r[e];
        return !{}.hasOwnProperty.call(r, e) ? (baseConfig.status.successCode = "20009", o = "") : (baseConfig.status.successCode = "20010", baseConfig.status.value = o), baseConfig.status.key = e, successLog(), "Function" === Util$1.paramType(t) && t.call(t, o), o
    }

    function getSuperProperties(e) {
        if (baseConfig.status.FnName = "$getSuperProperties", resetCode(), !0 === baseConfig.base.isHybrid) {
            var t = "AnsCallback" + +new Date;
            return window[t] = function () {
                e.apply(e, arguments), delete window[t]
            }, void transporter("getSuperProperties", [], t)
        }
        var i = Storage$1.getLocal("ARKSUPER") || {};
        return baseConfig.status.successCode = "20010", baseConfig.status.value = JSON.stringify(i), successLog(), "Function" === Util$1.paramType(e) && e.call(e, i), i
    }

    function unRegisterSuperProperty(e, t) {
        var i, n;
        baseConfig.status.FnName = "$unregisterSuperProperty", resetCode(), !0 !== baseConfig.base.isHybrid ? (checkPrivate(e, "$unregisterSuperProperty", !0), i = Storage$1.getLocal("ARKSUPER") || {}, Object.prototype.hasOwnProperty.call(i, e) ? (delete i[e], Storage$1.setLocal("ARKSUPER", i), baseConfig.status.successCode = "20003") : baseConfig.status.successCode = "20011", baseConfig.status.value = e, successLog(), "Function" === Util$1.paramType(t) && t.call(t)) : transporter("unRegisterSuperProperty", (n = backParamsArray.apply(e, arguments)).argArray, n.callback)
    }

    function clearSuperProperties(e) {
        var t;
        baseConfig.status.FnName = "$clearSuperProperties", resetCode(), !0 !== baseConfig.base.isHybrid ? (Storage$1.setLocal("ARKSUPER", {}), baseConfig.status.successCode = "20004", successLog(), "Function" === Util$1.paramType(e) && e.call(e)) : transporter("clearSuperProperties", (t = backParamsArray(e)).argArray, t.callback)
    }

    function reset(e) {
        !0 !== baseConfig.base.isHybrid ? (resetCode(), removeUUId(), clearSuperProperties(), clearCache(!0), sessionId.setId(), !0 === baseConfig.base.autoProfile ? profileSetOnce({$reset_time: Util$1.format(new Date, "yyyy-MM-dd hh:mm:ss.SSS")}, e) : "Function" === Util$1.paramType(e) && e.call(e), baseConfig.status.FnName = "$reset", baseConfig.status.successCode = "20005", successLog()) : transporter("reset", [], e)
    }

    function getDistinctId(e) {
        if (!0 === baseConfig.base.isHybrid) {
            var t = "AnsCallback" + +new Date;
            return window[t] = function () {
                e.apply(e, arguments), delete window[t]
            }, void transporter("getDistinctId", [], t)
        }
        var i = getIdentifyId() || getUUId();
        return "Function" === Util$1.paramType(e) && e.call(e, i), i
    }

    var ans = {
        __proto__: null,
        pageView: pageView,
        profileSet: profileSet,
        profileSetOnce: profileSetOnce,
        profileIncrement: profileIncrement,
        profileAppend: profileAppend,
        profileUnset: profileUnset,
        profileDelete: profileDelete,
        alias: alias,
        identify: identify,
        track: track,
        registerSuperProperty: registerSuperProperty,
        registerSuperProperties: registerSuperProperties,
        getSuperProperty: getSuperProperty,
        getSuperProperties: getSuperProperties,
        unRegisterSuperProperty: unRegisterSuperProperty,
        clearSuperProperties: clearSuperProperties,
        reset: reset,
        freeApi: freeApi,
        getDistinctId: getDistinctId,
        getPresetProperties: getPresetProperties
    };

    function startUp() {
        var e, t, i, n, r, o, a, s, l, c, u = [];
        !1 !== baseConfig.base.isHybrid || checkBase() ? (e = Storage$1.getLocal("ARKSUPER") || {}, !1 === baseConfig.base.isHybrid && !1 === isStartUp() && (t = !0, (Util$1.checkTypeList(baseConfig.base.startUpBlackList) || baseConfig.base.startUpWhiteList && !Util$1.checkTypeList(baseConfig.base.startUpWhiteList)) && (t = !1), !0 === t && (i = fillField(temp$1(baseConfig.status.FnName = "$startup")), i = Util$1.objMerge(i, {xcontext: e}), u.push(Util$1.delEmpty(i)))), n = Storage$1.getLocal("ARKFRISTPROFILE") || !1, !1 !== baseConfig.base.isHybrid || !0 !== baseConfig.base.autoProfile || n || (r = fillField(temp$1(baseConfig.status.FnName = "$profile_set_once")), a = {
            $first_visit_time: o = Storage$1.getLocal("ARKFRISTPROFILE") || Util$1.format(new Date, "yyyy-MM-dd hh:mm:ss.SSS"),
            $first_visit_language: (navigator.language || navigator.browserLanguage).toLowerCase()
        }, s = Util$1.objMerge(r, {xcontext: a}), u.push(Util$1.delEmpty(s)), Storage$1.setLocal("ARKFRISTPROFILE", o)), !0 === baseConfig.base.auto && (l = !1, (baseConfig.base.pageViewWhiteList && Util$1.checkTypeList(baseConfig.base.pageViewWhiteList) || !Util$1.checkTypeList(baseConfig.base.pageViewBlackList)) && (l = !0), !0 === l && (c = pageViewLog(baseConfig.base.pageProperty), u.push(c)), !0 !== baseConfig.base.hash && !0 !== baseConfig.base.singlePage || hashPageView()), 0 < u.length && upLog(u)) : errorLog()
    }

    function ieCreat() {
        Array.prototype.indexOf || (Array.prototype.indexOf = function (e) {
            var t = this.length >>> 0, i = Number(arguments[1]) || 0;
            for ((i = i < 0 ? Math.ceil(i) : Math.floor(i)) < 0 && (i += t); i < t; i++) if (i in this && this[i] === e) return i;
            return -1
        })
    }

    window.AnalysysAgent = window.AnalysysAgent || {};
    var AnalysysAgent = window.AnalysysAgent, AnalysysModule = window.AnalysysModule || {},
        config = AnalysysAgent.config || {}, param = AnalysysAgent.param || [];
    if (!0 !== AnalysysAgent.isInit) for (var key$1 in ans) AnalysysAgent[key$1] = function (t) {
        return function () {
            var e = arguments;
            if (-1 < t.indexOf("get")) return ans[t].apply(ans[t], e);
            param.push([t, arguments])
        }
    }(key$1);

    function isHybrid() {
        -1 < window.navigator.userAgent.indexOf("AnalysysAgent/Hybrid") && (baseConfig.base.isHybrid = !0), window.AnalysysAgentHybrid && !0 === window.AnalysysAgentHybrid.isHybrid() && (baseConfig.base.isHybrid = !0), AnalysysModule && !0 === AnalysysModule.moduleStatus && AnalysysModule.isHybrid()
    }

    function _createAnsSDK() {
        for (var e in AnalysysAgent.isInit = !0, ans) AnalysysAgent[e] = ans[e];
        for (var t in config) "Function" === Util$1.paramType(getField[t]) ? getField[t](config[t]) : baseConfig.base[t] = config[t];
        if (!0 === baseConfig.base.isHybrid) for (var i in HybridAns) AnalysysAgent[i] = !0 === AnalysysModule.moduleStatus ? AnalysysModule.onEvent(i, HybridAns) : HybridAns[i];
        AnalysysAgent.config = baseConfig.base, clearCache();
        for (var n = 0; n < param.length; n++) {
            var r = param[n];
            Util$1.objHasKay(ans, r[0]) && ("identify" === r[0] || "alias" === r[0] || -1 < r[0].indexOf("Super")) && ans[r[0]].apply(ans[r[0]], r[1])
        }
        lifecycle$5.AnalysysAgent && lifecycle$5.AnalysysAgent.init && lifecycle$5.AnalysysAgent.init(baseConfig.base), startUp();
        for (var o = 0; o < param.length; o++) {
            var a = param[o];
            Util$1.objHasKay(ans, a[0]) && "identify" !== a[0] && "alias" !== a[0] && a[0].indexOf("Super") < 0 && ans[a[0]].apply(ans[a[0]], a[1])
        }
    }

    if (ieCreat(), isHybrid(), AnalysysAgent.init = function (e) {
        "Object" !== Util$1.paramType(config) || AnalysysAgent.isInit && !0 !== baseConfig.base.isHybrid || AnalysysModule.moduleStatus && (!0 !== AnalysysModule.moduleStatus || !0 !== e.isHybrid && !0 !== e.isARKH5) || (!0 !== e.isARKH5 && (config = e), _createAnsSDK())
    }, !AnalysysAgent.isInit) {
        if ("Array" === Util$1.paramType(AnalysysAgent)) for (var i$3 = 0, fnName; i$3 < AnalysysAgent.length; i$3++) {
            "Function" === Util$1.paramType(ans[AnalysysAgent[i$3][0]]) ? (fnName = AnalysysAgent[i$3][0], AnalysysAgent[i$3].splice(0, 1), param.push([fnName, AnalysysAgent[i$3]])) : config[AnalysysAgent[i$3][0]] = AnalysysAgent[i$3][1]
        }
        !1 !== Util$1.isEmptyObject(config) || AnalysysModule.moduleStatus || _createAnsSDK()
    }
    return AnalysysAgent
});